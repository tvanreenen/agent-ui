(()=>{var Ws=Object.defineProperty;var Ac=Object.getOwnPropertyDescriptor;var Do=t=>{throw TypeError(t)};var kc=(t,e,r)=>e in t?Ws(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Zs=(t,e)=>{for(var r in e)Ws(t,r,{get:e[r],enumerable:!0})};var me=(t,e,r,n)=>{for(var s=n>1?void 0:n?Ac(e,r):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(s=(n?o(e,r,s):o(s))||s);return n&&s&&Ws(e,r,s),s};var M=(t,e,r)=>kc(t,typeof e!="symbol"?e+"":e,r),Ic=(t,e,r)=>e.has(t)||Do("Cannot "+r);var $o=(t,e,r)=>e.has(t)?Do("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);var pn=(t,e,r)=>(Ic(t,e,"access private method"),r);var hn=globalThis,mn=hn.ShadowRoot&&(hn.ShadyCSS===void 0||hn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qs=Symbol(),Uo=new WeakMap,Ir=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==qs)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o,r=this.t;if(mn&&e===void 0){let n=r!==void 0&&r.length===1;n&&(e=Uo.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Uo.set(r,e))}return e}toString(){return this.cssText}},Fo=t=>new Ir(typeof t=="string"?t:t+"",void 0,qs),Xs=(t,...e)=>{let r=t.length===1?t[0]:e.reduce((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new Ir(r,t,qs)},Ho=(t,e)=>{if(mn)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(let r of e){let n=document.createElement("style"),s=hn.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},Ks=mn?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(let n of e.cssRules)r+=n.cssText;return Fo(r)})(t):t;var{is:Cc,defineProperty:Nc,getOwnPropertyDescriptor:Oc,getOwnPropertyNames:Rc,getOwnPropertySymbols:Mc,getPrototypeOf:Lc}=Object,ot=globalThis,Go=ot.trustedTypes,Pc=Go?Go.emptyScript:"",Dc=ot.reactiveElementPolyfillSupport,Cr=(t,e)=>t,Nr={toAttribute(t,e){switch(e){case Boolean:t=t?Pc:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},gn=(t,e)=>!Cc(t,e),zo={attribute:!0,type:String,converter:Nr,reflect:!1,useDefault:!1,hasChanged:gn};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ot.litPropertyMetadata??(ot.litPropertyMetadata=new WeakMap);var Ye=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=zo){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){let n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&Nc(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){let{get:s,set:i}=Oc(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){let a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??zo}static _$Ei(){if(this.hasOwnProperty(Cr("elementProperties")))return;let e=Lc(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Cr("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Cr("properties"))){let r=this.properties,n=[...Rc(r),...Mc(r)];for(let s of n)this.createProperty(s,r[s])}let e=this[Symbol.metadata];if(e!==null){let r=litPropertyMetadata.get(e);if(r!==void 0)for(let[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(let[r,n]of this.elementProperties){let s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let r=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let s of n)r.unshift(Ks(s))}else e!==void 0&&r.push(Ks(e));return r}static _$Eu(e,r){let n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,r=this.constructor.elementProperties;for(let n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ho(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){let n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){let i=(n.converter?.toAttribute!==void 0?n.converter:Nr).toAttribute(r,n.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,r){let n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){let i=n.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:Nr;this._$Em=s;let a=o.fromAttribute(r,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){let s=this.constructor,i=this[e];if(n??(n=s.getPropertyOptions(e)),!((n.hasChanged??gn)(i,r)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[s,i]of n){let{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1,r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Ye.elementStyles=[],Ye.shadowRootOptions={mode:"open"},Ye[Cr("elementProperties")]=new Map,Ye[Cr("finalized")]=new Map,Dc?.({ReactiveElement:Ye}),(ot.reactiveElementVersions??(ot.reactiveElementVersions=[])).push("2.1.1");var Rr=globalThis,vn=Rr.trustedTypes,Bo=vn?vn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Xo="$lit$",at=`lit$${Math.random().toFixed(9).slice(2)}$`,Ko="?"+at,$c=`<${Ko}>`,bt=document,Mr=()=>bt.createComment(""),Lr=t=>t===null||typeof t!="object"&&typeof t!="function",ni=Array.isArray,Uc=t=>ni(t)||typeof t?.[Symbol.iterator]=="function",Ys=`[ 	
\f\r]`,Or=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,jo=/-->/g,Vo=/>/g,yt=RegExp(`>|${Ys}(?:([^\\s"'>=/]+)(${Ys}*=${Ys}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Wo=/'/g,Zo=/"/g,Yo=/^(?:script|style|textarea|title)$/i,si=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Ce=si(1),Xp=si(2),Kp=si(3),Et=Symbol.for("lit-noChange"),ie=Symbol.for("lit-nothing"),qo=new WeakMap,xt=bt.createTreeWalker(bt,129);function Jo(t,e){if(!ni(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Bo!==void 0?Bo.createHTML(e):e}var Fc=(t,e)=>{let r=t.length-1,n=[],s,i=e===2?"<svg>":e===3?"<math>":"",o=Or;for(let a=0;a<r;a++){let l=t[a],c,u,m=-1,g=0;for(;g<l.length&&(o.lastIndex=g,u=o.exec(l),u!==null);)g=o.lastIndex,o===Or?u[1]==="!--"?o=jo:u[1]!==void 0?o=Vo:u[2]!==void 0?(Yo.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=yt):u[3]!==void 0&&(o=yt):o===yt?u[0]===">"?(o=s??Or,m=-1):u[1]===void 0?m=-2:(m=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?yt:u[3]==='"'?Zo:Wo):o===Zo||o===Wo?o=yt:o===jo||o===Vo?o=Or:(o=yt,s=void 0);let h=o===yt&&t[a+1].startsWith("/>")?" ":"";i+=o===Or?l+$c:m>=0?(n.push(c),l.slice(0,m)+Xo+l.slice(m)+at+h):l+at+(m===-2?a:h)}return[Jo(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]},Pr=class t{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0,a=e.length-1,l=this.parts,[c,u]=Fc(e,r);if(this.el=t.createElement(c,n),xt.currentNode=this.el.content,r===2||r===3){let m=this.el.content.firstChild;m.replaceWith(...m.childNodes)}for(;(s=xt.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(let m of s.getAttributeNames())if(m.endsWith(Xo)){let g=u[o++],h=s.getAttribute(m).split(at),f=/([.?@])?(.*)/.exec(g);l.push({type:1,index:i,name:f[2],strings:h,ctor:f[1]==="."?Qs:f[1]==="?"?ei:f[1]==="@"?ti:tr}),s.removeAttribute(m)}else m.startsWith(at)&&(l.push({type:6,index:i}),s.removeAttribute(m));if(Yo.test(s.tagName)){let m=s.textContent.split(at),g=m.length-1;if(g>0){s.textContent=vn?vn.emptyScript:"";for(let h=0;h<g;h++)s.append(m[h],Mr()),xt.nextNode(),l.push({type:2,index:++i});s.append(m[g],Mr())}}}else if(s.nodeType===8)if(s.data===Ko)l.push({type:2,index:i});else{let m=-1;for(;(m=s.data.indexOf(at,m+1))!==-1;)l.push({type:7,index:i}),m+=at.length-1}i++}}static createElement(e,r){let n=bt.createElement("template");return n.innerHTML=e,n}};function er(t,e,r=t,n){if(e===Et)return e;let s=n!==void 0?r._$Co?.[n]:r._$Cl,i=Lr(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=er(t,s._$AS(t,e.values),s,n)),e}var Js=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:r},parts:n}=this._$AD,s=(e?.creationScope??bt).importNode(r,!0);xt.currentNode=s;let i=xt.nextNode(),o=0,a=0,l=n[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new Dr(i,i.nextSibling,this,e):l.type===1?c=new l.ctor(i,l.name,l.strings,this,e):l.type===6&&(c=new ri(i,this,e)),this._$AV.push(c),l=n[++a]}o!==l?.index&&(i=xt.nextNode(),o++)}return xt.currentNode=bt,s}p(e){let r=0;for(let n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}},Dr=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=ie,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=er(this,e,r),Lr(e)?e===ie||e==null||e===""?(this._$AH!==ie&&this._$AR(),this._$AH=ie):e!==this._$AH&&e!==Et&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Uc(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ie&&Lr(this._$AH)?this._$AA.nextSibling.data=e:this.T(bt.createTextNode(e)),this._$AH=e}$(e){let{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Pr.createElement(Jo(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(r);else{let i=new Js(s,this),o=i.u(this.options);i.p(r),this.T(o),this._$AH=i}}_$AC(e){let r=qo.get(e.strings);return r===void 0&&qo.set(e.strings,r=new Pr(e)),r}k(e){ni(this._$AH)||(this._$AH=[],this._$AR());let r=this._$AH,n,s=0;for(let i of e)s===r.length?r.push(n=new t(this.O(Mr()),this.O(Mr()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){let n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},tr=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=ie,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ie}_$AI(e,r=this,n,s){let i=this.strings,o=!1;if(i===void 0)e=er(this,e,r,0),o=!Lr(e)||e!==this._$AH&&e!==Et,o&&(this._$AH=e);else{let a=e,l,c;for(e=i[0],l=0;l<i.length-1;l++)c=er(this,a[n+l],r,l),c===Et&&(c=this._$AH[l]),o||(o=!Lr(c)||c!==this._$AH[l]),c===ie?e=ie:e!==ie&&(e+=(c??"")+i[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===ie?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Qs=class extends tr{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ie?void 0:e}},ei=class extends tr{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ie)}},ti=class extends tr{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=er(this,e,r,0)??ie)===Et)return;let n=this._$AH,s=e===ie&&n!==ie||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==ie&&(n===ie||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},ri=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){er(this,e)}};var Hc=Rr.litHtmlPolyfillSupport;Hc?.(Pr,Dr),(Rr.litHtmlVersions??(Rr.litHtmlVersions=[])).push("3.3.1");var Qo=(t,e,r)=>{let n=r?.renderBefore??e,s=n._$litPart$;if(s===void 0){let i=r?.renderBefore??null;n._$litPart$=s=new Dr(e.insertBefore(Mr(),i),i,void 0,r??{})}return s._$AI(t),s};var $r=globalThis,lt=class extends Ye{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;let e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){let r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Qo(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Et}};lt._$litElement$=!0,lt.finalized=!0,$r.litElementHydrateSupport?.({LitElement:lt});var Gc=$r.litElementPolyfillSupport;Gc?.({LitElement:lt});($r.litElementVersions??($r.litElementVersions=[])).push("4.2.1");var ea=t=>(e,r)=>{r!==void 0?r.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};var zc={attribute:!0,type:String,converter:Nr,reflect:!1,hasChanged:gn},Bc=(t=zc,e,r)=>{let{kind:n,metadata:s}=r,i=globalThis.litPropertyMetadata.get(s);if(i===void 0&&globalThis.litPropertyMetadata.set(s,i=new Map),n==="setter"&&((t=Object.create(t)).wrapped=!0),i.set(r.name,t),n==="accessor"){let{name:o}=r;return{set(a){let l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(n==="setter"){let{name:o}=r;return function(a){let l=this[o];e.call(this,a),this.requestUpdate(o,l,t)}}throw Error("Unsupported decorator location: "+n)};function ct(t){return(e,r)=>typeof r=="object"?Bc(t,e,r):((n,s,i)=>{let o=s.hasOwnProperty(i);return s.constructor.createProperty(i,n),o?Object.getOwnPropertyDescriptor(s,i):void 0})(t,e,r)}function Ge(t){return ct({...t,state:!0,attribute:!1})}function li(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var At=li();function oa(t){At=t}var aa=/[&<>"']/,jc=new RegExp(aa.source,"g"),la=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Vc=new RegExp(la.source,"g"),Wc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ta=t=>Wc[t];function Ie(t,e){if(e){if(aa.test(t))return t.replace(jc,ta)}else if(la.test(t))return t.replace(Vc,ta);return t}var Zc=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function qc(t){return t.replace(Zc,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var Xc=/(^|[^\[])\^/g;function V(t,e){let r=typeof t=="string"?t:t.source;e=e||"";let n={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Xc,"$1"),r=r.replace(s,o),n},getRegex:()=>new RegExp(r,e)};return n}function ra(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var Fr={exec:()=>null};function na(t,e){let r=t.replace(/\|/g,(i,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=r.split(/ \|/),s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function yn(t,e,r){let n=t.length;if(n===0)return"";let s=0;for(;s<n;){let i=t.charAt(n-s-1);if(i===e&&!r)s++;else if(i!==e&&r)s++;else break}return t.slice(0,n-s)}function Kc(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])r++;else if(t[n]===e[1]&&(r--,r<0))return n;return-1}function sa(t,e,r,n){let s=e.href,i=e.title?Ie(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let a={type:"link",raw:r,href:s,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:r,href:s,title:i,text:Ie(o)}}function Yc(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(s=>{let i=s.match(/^\s+/);if(i===null)return s;let[o]=i;return o.length>=n.length?s.slice(n.length):s}).join(`
`)}var rr=class{constructor(e){M(this,"options");M(this,"rules");M(this,"lexer");this.options=e||At}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:yn(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],s=Yc(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:s}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let s=yn(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=yn(n.replace(/^ *>[ \t]?/gm,""),`
`);let s=this.lexer.state.top;this.lexer.state.top=!0;let i=this.lexer.blockTokens(n);return this.lexer.state.top=s,{type:"blockquote",raw:r[0],tokens:i,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n=r[1].trim(),s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",l="",c=!1;for(;e;){let u=!1;if(!(r=o.exec(e))||this.rules.block.hr.test(e))break;a=r[0],e=e.substring(a.length);let m=r[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),g=e.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,l=m.trimStart()):(h=r[2].search(/[^ ]/),h=h>4?1:h,l=m.slice(h),h+=r[1].length);let f=!1;if(!m&&/^ *$/.test(g)&&(a+=g+`
`,e=e.substring(g.length+1),u=!0),!u){let b=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),R=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fe=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),F=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;e;){let Te=e.split(`
`,1)[0];if(g=Te,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),fe.test(g)||F.test(g)||b.test(g)||R.test(e))break;if(g.search(/[^ ]/)>=h||!g.trim())l+=`
`+g.slice(h);else{if(f||m.search(/[^ ]/)>=4||fe.test(m)||F.test(m)||R.test(m))break;l+=`
`+g}!f&&!g.trim()&&(f=!0),a+=Te+`
`,e=e.substring(Te.length+1),m=g.slice(h)}}i.loose||(c?i.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let v=null,T;this.options.gfm&&(v=/^\[[ xX]\] /.exec(l),v&&(T=v[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:a,task:!!v,checked:T,loose:!1,text:l,tokens:[]}),i.raw+=a}i.items[i.items.length-1].raw=a.trimEnd(),i.items[i.items.length-1].text=l.trimEnd(),i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){let m=i.items[u].tokens.filter(h=>h.type==="space"),g=m.length>0&&m.some(h=>/\n.*\n/.test(h.raw));i.loose=g}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),s=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:s,title:i}}}table(e){let r=this.rules.block.table.exec(e);if(!r||!/[:|]/.test(r[2]))return;let n=na(r[1]),s=r[2].replace(/^\||\| *$/g,"").split("|"),i=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let a of s)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of n)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of i)o.rows.push(na(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:Ie(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let o=yn(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=Kc(r[2],"()");if(o>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let s=r[2],i="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],i=o[3])}else i=r[3]?r[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(n)?s=s.slice(1):s=s.slice(1,-1)),sa(r,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let s=(n[2]||n[1]).replace(/\s+/g," "),i=r[s.toLowerCase()];if(!i){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return sa(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){let o=[...s[0]].length-1,a,l,c=o,u=0,m=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,r=r.slice(-1*e.length+o);(s=m.exec(r))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);let g=[...s[0]][0].length,h=e.slice(0,o+s.index+g+l);if(Math.min(o,l)%2){let v=h.slice(1,-1);return{type:"em",raw:h,text:v,tokens:this.lexer.inlineTokens(v)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),s=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return s&&i&&(n=n.substring(1,n.length-1)),n=Ie(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let n,s;return r[2]==="@"?(n=Ie(r[1]),s="mailto:"+n):(n=Ie(r[1]),s=n),{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let n,s;if(r[2]==="@")n=Ie(r[0]),s="mailto:"+n;else{let i;do i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(i!==r[0]);n=Ie(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let n;return this.lexer.state.inRawBlock?n=r[0]:n=Ie(r[0]),{type:"text",raw:r[0],text:n}}}},Jc=/^(?: *(?:\n|$))+/,Qc=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,eu=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Gr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,tu=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ca=/(?:[*+-]|\d{1,9}[.)])/,ua=V(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ca).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ci=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ru=/^[^\n]+/,ui=/(?!\s*\])(?:\\.|[^\[\]\\])+/,nu=V(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ui).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),su=V(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ca).getRegex(),En="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",di=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iu=V("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",di).replace("tag",En).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),da=V(ci).replace("hr",Gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex(),ou=V(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",da).getRegex(),fi={blockquote:ou,code:Qc,def:nu,fences:eu,heading:tu,hr:Gr,html:iu,lheading:ua,list:su,newline:Jc,paragraph:da,table:Fr,text:ru},ia=V("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex(),au={...fi,table:ia,paragraph:V(ci).replace("hr",Gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ia).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En).getRegex()},lu={...fi,html:V(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",di).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Fr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(ci).replace("hr",Gr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ua).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fa=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,cu=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,pa=/^( {2,}|\\)\n(?!\s*$)/,uu=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,zr="\\p{P}\\p{S}",du=V(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,zr).getRegex(),fu=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,pu=V(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,zr).getRegex(),hu=V("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,zr).getRegex(),mu=V("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,zr).getRegex(),gu=V(/\\([punct])/,"gu").replace(/punct/g,zr).getRegex(),vu=V(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_u=V(di).replace("(?:-->|$)","-->").getRegex(),yu=V("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_u).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xu=V(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",bn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ha=V(/^!?\[(label)\]\[(ref)\]/).replace("label",bn).replace("ref",ui).getRegex(),ma=V(/^!?\[(ref)\](?:\[\])?/).replace("ref",ui).getRegex(),bu=V("reflink|nolink(?!\\()","g").replace("reflink",ha).replace("nolink",ma).getRegex(),pi={_backpedal:Fr,anyPunctuation:gu,autolink:vu,blockSkip:fu,br:pa,code:cu,del:Fr,emStrongLDelim:pu,emStrongRDelimAst:hu,emStrongRDelimUnd:mu,escape:fa,link:xu,nolink:ma,punctuation:du,reflink:ha,reflinkSearch:bu,tag:yu,text:uu,url:Fr},Eu={...pi,link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",bn).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bn).getRegex()},ii={...pi,escape:V(fa).replace("])","~|])").getRegex(),url:V(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Tu={...ii,br:V(pa).replace("{2,}","*").getRegex(),text:V(ii.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},xn={normal:fi,gfm:au,pedantic:lu},Ur={normal:pi,gfm:ii,breaks:Tu,pedantic:Eu},Je=class t{constructor(e){M(this,"tokens");M(this,"options");M(this,"state");M(this,"tokenizer");M(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||At,this.options.tokenizer=this.options.tokenizer||new rr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:xn.normal,inline:Ur.normal};this.options.pedantic?(r.block=xn.pedantic,r.inline=Ur.pedantic):this.options.gfm&&(r.block=xn.gfm,this.options.breaks?r.inline=Ur.breaks:r.inline=Ur.gfm),this.tokenizer.rules=r}static get rules(){return{block:xn,inline:Ur}}static lex(e,r){return new t(r).lex(e)}static lexInline(e,r){return new t(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let n,s,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+n.raw,s.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){s=r[r.length-1],o&&s.type==="paragraph"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&s.type==="text"?(s.raw+=`
`+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):r.push(n);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,s,i,o=e,a,l,c;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),s=r[r.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),s=r[r.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,o,c)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),r.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0,m=e.slice(1),g;this.options.extensions.startInline.forEach(h=>{g=h.call({lexer:this},m),typeof g=="number"&&g>=0&&(u=Math.min(u,g))}),u<1/0&&u>=0&&(i=e.substring(0,u+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),l=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):r.push(n);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},nr=class{constructor(e){M(this,"options");this.options=e||At}code(e,r,n){let s=(r||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+Ie(s)+'">'+(n?e:Ie(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Ie(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,r){return e}heading(e,r,n){return`<h${r}>${e}</h${r}>
`}hr(){return`<hr>
`}list(e,r,n){let s=r?"ol":"ul",i=r&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+e+"</"+s+`>
`}listitem(e,r,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){let s=ra(e);if(s===null)return n;e=s;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){let s=ra(e);if(s===null)return n;e=s;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=">",i}text(e){return e}},Hr=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},Qe=class t{constructor(e){M(this,"options");M(this,"renderer");M(this,"textRenderer");this.options=e||At,this.options.renderer=this.options.renderer||new nr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Hr}static parse(e,r){return new t(r).parse(e)}static parseInline(e,r){return new t(r).parseInline(e)}parse(e,r=!0){let n="";for(let s=0;s<e.length;s++){let i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let o=i,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=a||"";continue}}switch(i.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{let o=i;n+=this.renderer.heading(this.parseInline(o.tokens),o.depth,qc(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=i;n+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=i,a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<o.rows.length;u++){let m=o.rows[u];l="";for(let g=0;g<m.length;g++)l+=this.renderer.tablecell(this.parseInline(m[g].tokens),{header:!1,align:o.align[g]});c+=this.renderer.tablerow(l)}n+=this.renderer.table(a,c);continue}case"blockquote":{let o=i,a=this.parse(o.tokens);n+=this.renderer.blockquote(a);continue}case"list":{let o=i,a=o.ordered,l=o.start,c=o.loose,u="";for(let m=0;m<o.items.length;m++){let g=o.items[m],h=g.checked,f=g.task,v="";if(g.task){let T=this.renderer.checkbox(!!h);c?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=T+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=T+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:T+" "}):v+=T+" "}v+=this.parse(g.tokens,c),u+=this.renderer.listitem(v,f,!!h)}n+=this.renderer.list(u,a,l);continue}case"html":{let o=i;n+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=i;n+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,a=o.tokens?this.parseInline(o.tokens):o.text;for(;s+1<e.length&&e[s+1].type==="text";)o=e[++s],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);n+=r?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,r){r=r||this.renderer;let n="";for(let s=0;s<e.length;s++){let i=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=o||"";continue}}switch(i.type){case"escape":{let o=i;n+=r.text(o.text);break}case"html":{let o=i;n+=r.html(o.text);break}case"link":{let o=i;n+=r.link(o.href,o.title,this.parseInline(o.tokens,r));break}case"image":{let o=i;n+=r.image(o.href,o.title,o.text);break}case"strong":{let o=i;n+=r.strong(this.parseInline(o.tokens,r));break}case"em":{let o=i;n+=r.em(this.parseInline(o.tokens,r));break}case"codespan":{let o=i;n+=r.codespan(o.text);break}case"br":{n+=r.br();break}case"del":{let o=i;n+=r.del(this.parseInline(o.tokens,r));break}case"text":{let o=i;n+=r.text(o.text);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}},Tt=class{constructor(e){M(this,"options");this.options=e||At}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}};M(Tt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var wt,ai,ga,oi=class{constructor(...e){$o(this,wt);M(this,"defaults",li());M(this,"options",this.setOptions);M(this,"parse",pn(this,wt,ai).call(this,Je.lex,Qe.parse));M(this,"parseInline",pn(this,wt,ai).call(this,Je.lexInline,Qe.parseInline));M(this,"Parser",Qe);M(this,"Renderer",nr);M(this,"TextRenderer",Hr);M(this,"Lexer",Je);M(this,"Tokenizer",rr);M(this,"Hooks",Tt);this.use(...e)}walkTokens(e,r){let n=[];for(let s of e)switch(n=n.concat(r.call(this,s)),s.type){case"table":{let i=s;for(let o of i.header)n=n.concat(this.walkTokens(o.tokens,r));for(let o of i.rows)for(let a of o)n=n.concat(this.walkTokens(a.tokens,r));break}case"list":{let i=s;n=n.concat(this.walkTokens(i.items,r));break}default:{let i=s;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let a=i[o].flat(1/0);n=n.concat(this.walkTokens(a,r))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,r)))}}return n}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=r.renderers[i.name];o?r.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:r.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[i.level];o?o.unshift(i.tokenizer):r[i.level]=[i.tokenizer],i.start&&(i.level==="block"?r.startBlock?r.startBlock.push(i.start):r.startBlock=[i.start]:i.level==="inline"&&(r.startInline?r.startInline.push(i.start):r.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(r.childTokens[i.name]=i.childTokens)}),s.extensions=r),n.renderer){let i=this.defaults.renderer||new nr(this.defaults);for(let o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,l=n.renderer[a],c=i[a];i[a]=(...u)=>{let m=l.apply(i,u);return m===!1&&(m=c.apply(i,u)),m||""}}s.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new rr(this.defaults);for(let o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=n.tokenizer[a],c=i[a];i[a]=(...u)=>{let m=l.apply(i,u);return m===!1&&(m=c.apply(i,u)),m}}s.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new Tt;for(let o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,l=n.hooks[a],c=i[a];Tt.passThroughHooks.has(o)?i[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(g=>c.call(i,g));let m=l.call(i,u);return c.call(i,m)}:i[a]=(...u)=>{let m=l.apply(i,u);return m===!1&&(m=c.apply(i,u)),m}}s.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,o=n.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return Je.lex(e,r??this.defaults)}parser(e,r){return Qe.parse(e,r??this.defaults)}};wt=new WeakSet,ai=function(e,r){return(n,s)=>{let i={...s},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=pn(this,wt,ga).call(this,!!o.silent,!!o.async);if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>r(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(n=o.hooks.preprocess(n));let l=e(n,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=r(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}},ga=function(e,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let s="<p>An error occurred:</p><pre>"+Ie(n.message+"",!0)+"</pre>";return r?Promise.resolve(s):s}if(r)return Promise.reject(n);throw n}};var St=new oi;function z(t,e){return St.parse(t,e)}z.options=z.setOptions=function(t){return St.setOptions(t),z.defaults=St.defaults,oa(z.defaults),z};z.getDefaults=li;z.defaults=At;z.use=function(...t){return St.use(...t),z.defaults=St.defaults,oa(z.defaults),z};z.walkTokens=function(t,e){return St.walkTokens(t,e)};z.parseInline=St.parseInline;z.Parser=Qe;z.parser=Qe.parse;z.Renderer=nr;z.TextRenderer=Hr;z.Lexer=Je;z.lexer=Je.lex;z.Tokenizer=rr;z.Hooks=Tt;z.parse=z;var Dh=z.options,$h=z.setOptions,Uh=z.use,Fh=z.walkTokens,Hh=z.parseInline;var Gh=Qe.parse,zh=Je.lex;var{entries:Aa,setPrototypeOf:va,isFrozen:Su,getPrototypeOf:wu,getOwnPropertyDescriptor:Au}=Object,{freeze:be,seal:Ne,create:ka}=Object,{apply:yi,construct:xi}=typeof Reflect<"u"&&Reflect;be||(be=function(e){return e});Ne||(Ne=function(e){return e});yi||(yi=function(e,r,n){return e.apply(r,n)});xi||(xi=function(e,r){return new e(...r)});var Tn=Ee(Array.prototype.forEach),ku=Ee(Array.prototype.lastIndexOf),_a=Ee(Array.prototype.pop),Br=Ee(Array.prototype.push),Iu=Ee(Array.prototype.splice),wn=Ee(String.prototype.toLowerCase),hi=Ee(String.prototype.toString),ya=Ee(String.prototype.match),jr=Ee(String.prototype.replace),Cu=Ee(String.prototype.indexOf),Nu=Ee(String.prototype.trim),Pe=Ee(Object.prototype.hasOwnProperty),xe=Ee(RegExp.prototype.test),Vr=Ou(TypeError);function Ee(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return yi(t,e,n)}}function Ou(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return xi(t,r)}}function $(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wn;va&&va(t,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){let i=r(s);i!==s&&(Su(e)||(e[n]=i),s=i)}t[s]=!0}return t}function Ru(t){for(let e=0;e<t.length;e++)Pe(t,e)||(t[e]=null);return t}function et(t){let e=ka(null);for(let[r,n]of Aa(t))Pe(t,r)&&(Array.isArray(n)?e[r]=Ru(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=et(n):e[r]=n);return e}function Wr(t,e){for(;t!==null;){let n=Au(t,e);if(n){if(n.get)return Ee(n.get);if(typeof n.value=="function")return Ee(n.value)}t=wu(t)}function r(){return null}return r}var xa=be(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mi=be(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gi=be(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Mu=be(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vi=be(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Lu=be(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ba=be(["#text"]),Ea=be(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_i=be(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ta=be(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Sn=be(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Pu=Ne(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Du=Ne(/<%[\w\W]*|[\w\W]*%>/gm),$u=Ne(/\$\{[\w\W]*/gm),Uu=Ne(/^data-[\-\w.\u00B7-\uFFFF]+$/),Fu=Ne(/^aria-[\-\w]+$/),Ia=Ne(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Hu=Ne(/^(?:\w+script|data):/i),Gu=Ne(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ca=Ne(/^html$/i),zu=Ne(/^[a-z][.\w]*(-[.\w]+)+$/i),Sa=Object.freeze({__proto__:null,ARIA_ATTR:Fu,ATTR_WHITESPACE:Gu,CUSTOM_ELEMENT:zu,DATA_ATTR:Uu,DOCTYPE_NAME:Ca,ERB_EXPR:Du,IS_ALLOWED_URI:Ia,IS_SCRIPT_OR_DATA:Hu,MUSTACHE_EXPR:Pu,TMPLIT_EXPR:$u}),Zr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Bu=function(){return typeof window>"u"?null:window},ju=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));let i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},wa=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Na(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bu(),e=I=>Na(I);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Zr.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t,n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:g,trustedTypes:h}=t,f=l.prototype,v=Wr(f,"cloneNode"),T=Wr(f,"remove"),b=Wr(f,"nextSibling"),R=Wr(f,"childNodes"),fe=Wr(f,"parentNode");if(typeof o=="function"){let I=r.createElement("template");I.content&&I.content.ownerDocument&&(r=I.content.ownerDocument)}let F,Te="",{implementation:gt,createNodeIterator:vt,createDocumentFragment:Os,getElementsByTagName:fc}=r,{importNode:pc}=n,ye=wa();e.isSupported=typeof Aa=="function"&&typeof fe=="function"&&gt&&gt.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Rs,ERB_EXPR:Ms,TMPLIT_EXPR:Ls,DATA_ATTR:hc,ARIA_ATTR:mc,IS_SCRIPT_OR_DATA:gc,ATTR_WHITESPACE:uo,CUSTOM_ELEMENT:vc}=Sa,{IS_ALLOWED_URI:fo}=Sa,ne=null,po=$({},[...xa,...mi,...gi,...vi,...ba]),ae=null,ho=$({},[...Ea,..._i,...Ta,...Sn]),Q=Object.seal(ka(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Sr=null,Ps=null,mo=!0,Ds=!0,go=!1,vo=!0,Zt=!1,on=!0,_t=!1,$s=!1,Us=!1,qt=!1,an=!1,ln=!1,_o=!0,yo=!1,_c="user-content-",Fs=!0,wr=!1,Xt={},Kt=null,xo=$({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),bo=null,Eo=$({},["audio","video","img","source","image","track"]),Hs=null,To=$({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),cn="http://www.w3.org/1998/Math/MathML",un="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml",Yt=qe,Gs=!1,zs=null,yc=$({},[cn,un,qe],hi),dn=$({},["mi","mo","mn","ms","mtext"]),fn=$({},["annotation-xml"]),xc=$({},["title","style","font","a","script"]),Ar=null,bc=["application/xhtml+xml","text/html"],Ec="text/html",se=null,Jt=null,Tc=r.createElement("form"),So=function(d){return d instanceof RegExp||d instanceof Function},Bs=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Jt&&Jt===d)){if((!d||typeof d!="object")&&(d={}),d=et(d),Ar=bc.indexOf(d.PARSER_MEDIA_TYPE)===-1?Ec:d.PARSER_MEDIA_TYPE,se=Ar==="application/xhtml+xml"?hi:wn,ne=Pe(d,"ALLOWED_TAGS")?$({},d.ALLOWED_TAGS,se):po,ae=Pe(d,"ALLOWED_ATTR")?$({},d.ALLOWED_ATTR,se):ho,zs=Pe(d,"ALLOWED_NAMESPACES")?$({},d.ALLOWED_NAMESPACES,hi):yc,Hs=Pe(d,"ADD_URI_SAFE_ATTR")?$(et(To),d.ADD_URI_SAFE_ATTR,se):To,bo=Pe(d,"ADD_DATA_URI_TAGS")?$(et(Eo),d.ADD_DATA_URI_TAGS,se):Eo,Kt=Pe(d,"FORBID_CONTENTS")?$({},d.FORBID_CONTENTS,se):xo,Sr=Pe(d,"FORBID_TAGS")?$({},d.FORBID_TAGS,se):et({}),Ps=Pe(d,"FORBID_ATTR")?$({},d.FORBID_ATTR,se):et({}),Xt=Pe(d,"USE_PROFILES")?d.USE_PROFILES:!1,mo=d.ALLOW_ARIA_ATTR!==!1,Ds=d.ALLOW_DATA_ATTR!==!1,go=d.ALLOW_UNKNOWN_PROTOCOLS||!1,vo=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zt=d.SAFE_FOR_TEMPLATES||!1,on=d.SAFE_FOR_XML!==!1,_t=d.WHOLE_DOCUMENT||!1,qt=d.RETURN_DOM||!1,an=d.RETURN_DOM_FRAGMENT||!1,ln=d.RETURN_TRUSTED_TYPE||!1,Us=d.FORCE_BODY||!1,_o=d.SANITIZE_DOM!==!1,yo=d.SANITIZE_NAMED_PROPS||!1,Fs=d.KEEP_CONTENT!==!1,wr=d.IN_PLACE||!1,fo=d.ALLOWED_URI_REGEXP||Ia,Yt=d.NAMESPACE||qe,dn=d.MATHML_TEXT_INTEGRATION_POINTS||dn,fn=d.HTML_INTEGRATION_POINTS||fn,Q=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&So(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&So(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zt&&(Ds=!1),an&&(qt=!0),Xt&&(ne=$({},ba),ae=[],Xt.html===!0&&($(ne,xa),$(ae,Ea)),Xt.svg===!0&&($(ne,mi),$(ae,_i),$(ae,Sn)),Xt.svgFilters===!0&&($(ne,gi),$(ae,_i),$(ae,Sn)),Xt.mathMl===!0&&($(ne,vi),$(ae,Ta),$(ae,Sn))),d.ADD_TAGS&&(ne===po&&(ne=et(ne)),$(ne,d.ADD_TAGS,se)),d.ADD_ATTR&&(ae===ho&&(ae=et(ae)),$(ae,d.ADD_ATTR,se)),d.ADD_URI_SAFE_ATTR&&$(Hs,d.ADD_URI_SAFE_ATTR,se),d.FORBID_CONTENTS&&(Kt===xo&&(Kt=et(Kt)),$(Kt,d.FORBID_CONTENTS,se)),Fs&&(ne["#text"]=!0),_t&&$(ne,["html","head","body"]),ne.table&&($(ne,["tbody"]),delete Sr.tbody),d.TRUSTED_TYPES_POLICY){if(typeof d.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof d.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');F=d.TRUSTED_TYPES_POLICY,Te=F.createHTML("")}else F===void 0&&(F=ju(h,s)),F!==null&&typeof Te=="string"&&(Te=F.createHTML(""));be&&be(d),Jt=d}},wo=$({},[...mi,...gi,...Mu]),Ao=$({},[...vi,...Lu]),Sc=function(d){let x=fe(d);(!x||!x.tagName)&&(x={namespaceURI:Yt,tagName:"template"});let k=wn(d.tagName),q=wn(x.tagName);return zs[d.namespaceURI]?d.namespaceURI===un?x.namespaceURI===qe?k==="svg":x.namespaceURI===cn?k==="svg"&&(q==="annotation-xml"||dn[q]):!!wo[k]:d.namespaceURI===cn?x.namespaceURI===qe?k==="math":x.namespaceURI===un?k==="math"&&fn[q]:!!Ao[k]:d.namespaceURI===qe?x.namespaceURI===un&&!fn[q]||x.namespaceURI===cn&&!dn[q]?!1:!Ao[k]&&(xc[k]||!wo[k]):!!(Ar==="application/xhtml+xml"&&zs[d.namespaceURI]):!1},He=function(d){Br(e.removed,{element:d});try{fe(d).removeChild(d)}catch{T(d)}},Qt=function(d,x){try{Br(e.removed,{attribute:x.getAttributeNode(d),from:x})}catch{Br(e.removed,{attribute:null,from:x})}if(x.removeAttribute(d),d==="is")if(qt||an)try{He(x)}catch{}else try{x.setAttribute(d,"")}catch{}},ko=function(d){let x=null,k=null;if(Us)d="<remove></remove>"+d;else{let te=ya(d,/^[\r\n\t ]+/);k=te&&te[0]}Ar==="application/xhtml+xml"&&Yt===qe&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");let q=F?F.createHTML(d):d;if(Yt===qe)try{x=new g().parseFromString(q,Ar)}catch{}if(!x||!x.documentElement){x=gt.createDocument(Yt,"template",null);try{x.documentElement.innerHTML=Gs?Te:q}catch{}}let pe=x.body||x.documentElement;return d&&k&&pe.insertBefore(r.createTextNode(k),pe.childNodes[0]||null),Yt===qe?fc.call(x,_t?"html":"body")[0]:_t?x.documentElement:pe},Io=function(d){return vt.call(d.ownerDocument||d,d,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},js=function(d){return d instanceof m&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof u)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},Co=function(d){return typeof a=="function"&&d instanceof a};function Xe(I,d,x){Tn(I,k=>{k.call(e,d,x,Jt)})}let No=function(d){let x=null;if(Xe(ye.beforeSanitizeElements,d,null),js(d))return He(d),!0;let k=se(d.nodeName);if(Xe(ye.uponSanitizeElement,d,{tagName:k,allowedTags:ne}),on&&d.hasChildNodes()&&!Co(d.firstElementChild)&&xe(/<[/\w!]/g,d.innerHTML)&&xe(/<[/\w!]/g,d.textContent)||d.nodeType===Zr.progressingInstruction||on&&d.nodeType===Zr.comment&&xe(/<[/\w]/g,d.data))return He(d),!0;if(!ne[k]||Sr[k]){if(!Sr[k]&&Ro(k)&&(Q.tagNameCheck instanceof RegExp&&xe(Q.tagNameCheck,k)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(k)))return!1;if(Fs&&!Kt[k]){let q=fe(d)||d.parentNode,pe=R(d)||d.childNodes;if(pe&&q){let te=pe.length;for(let Se=te-1;Se>=0;--Se){let Ke=v(pe[Se],!0);Ke.__removalCount=(d.__removalCount||0)+1,q.insertBefore(Ke,b(d))}}}return He(d),!0}return d instanceof l&&!Sc(d)||(k==="noscript"||k==="noembed"||k==="noframes")&&xe(/<\/no(script|embed|frames)/i,d.innerHTML)?(He(d),!0):(Zt&&d.nodeType===Zr.text&&(x=d.textContent,Tn([Rs,Ms,Ls],q=>{x=jr(x,q," ")}),d.textContent!==x&&(Br(e.removed,{element:d.cloneNode()}),d.textContent=x)),Xe(ye.afterSanitizeElements,d,null),!1)},Oo=function(d,x,k){if(_o&&(x==="id"||x==="name")&&(k in r||k in Tc))return!1;if(!(Ds&&!Ps[x]&&xe(hc,x))){if(!(mo&&xe(mc,x))){if(!ae[x]||Ps[x]){if(!(Ro(d)&&(Q.tagNameCheck instanceof RegExp&&xe(Q.tagNameCheck,d)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(d))&&(Q.attributeNameCheck instanceof RegExp&&xe(Q.attributeNameCheck,x)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(x))||x==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&xe(Q.tagNameCheck,k)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(k))))return!1}else if(!Hs[x]){if(!xe(fo,jr(k,uo,""))){if(!((x==="src"||x==="xlink:href"||x==="href")&&d!=="script"&&Cu(k,"data:")===0&&bo[d])){if(!(go&&!xe(gc,jr(k,uo,"")))){if(k)return!1}}}}}}return!0},Ro=function(d){return d!=="annotation-xml"&&ya(d,vc)},Mo=function(d){Xe(ye.beforeSanitizeAttributes,d,null);let{attributes:x}=d;if(!x||js(d))return;let k={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0},q=x.length;for(;q--;){let pe=x[q],{name:te,namespaceURI:Se,value:Ke}=pe,kr=se(te),Vs=Ke,he=te==="value"?Vs:Nu(Vs);if(k.attrName=kr,k.attrValue=he,k.keepAttr=!0,k.forceKeepAttr=void 0,Xe(ye.uponSanitizeAttribute,d,k),he=k.attrValue,yo&&(kr==="id"||kr==="name")&&(Qt(te,d),he=_c+he),on&&xe(/((--!?|])>)|<\/(style|title)/i,he)){Qt(te,d);continue}if(k.forceKeepAttr)continue;if(!k.keepAttr){Qt(te,d);continue}if(!vo&&xe(/\/>/i,he)){Qt(te,d);continue}Zt&&Tn([Rs,Ms,Ls],Po=>{he=jr(he,Po," ")});let Lo=se(d.nodeName);if(!Oo(Lo,kr,he)){Qt(te,d);continue}if(F&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Se)switch(h.getAttributeType(Lo,kr)){case"TrustedHTML":{he=F.createHTML(he);break}case"TrustedScriptURL":{he=F.createScriptURL(he);break}}if(he!==Vs)try{Se?d.setAttributeNS(Se,te,he):d.setAttribute(te,he),js(d)?He(d):_a(e.removed)}catch{Qt(te,d)}}Xe(ye.afterSanitizeAttributes,d,null)},wc=function I(d){let x=null,k=Io(d);for(Xe(ye.beforeSanitizeShadowDOM,d,null);x=k.nextNode();)Xe(ye.uponSanitizeShadowNode,x,null),No(x),Mo(x),x.content instanceof i&&I(x.content);Xe(ye.afterSanitizeShadowDOM,d,null)};return e.sanitize=function(I){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=null,k=null,q=null,pe=null;if(Gs=!I,Gs&&(I="<!-->"),typeof I!="string"&&!Co(I))if(typeof I.toString=="function"){if(I=I.toString(),typeof I!="string")throw Vr("dirty is not a string, aborting")}else throw Vr("toString is not a function");if(!e.isSupported)return I;if($s||Bs(d),e.removed=[],typeof I=="string"&&(wr=!1),wr){if(I.nodeName){let Ke=se(I.nodeName);if(!ne[Ke]||Sr[Ke])throw Vr("root node is forbidden and cannot be sanitized in-place")}}else if(I instanceof a)x=ko("<!---->"),k=x.ownerDocument.importNode(I,!0),k.nodeType===Zr.element&&k.nodeName==="BODY"||k.nodeName==="HTML"?x=k:x.appendChild(k);else{if(!qt&&!Zt&&!_t&&I.indexOf("<")===-1)return F&&ln?F.createHTML(I):I;if(x=ko(I),!x)return qt?null:ln?Te:""}x&&Us&&He(x.firstChild);let te=Io(wr?I:x);for(;q=te.nextNode();)No(q),Mo(q),q.content instanceof i&&wc(q.content);if(wr)return I;if(qt){if(an)for(pe=Os.call(x.ownerDocument);x.firstChild;)pe.appendChild(x.firstChild);else pe=x;return(ae.shadowroot||ae.shadowrootmode)&&(pe=pc.call(n,pe,!0)),pe}let Se=_t?x.outerHTML:x.innerHTML;return _t&&ne["!doctype"]&&x.ownerDocument&&x.ownerDocument.doctype&&x.ownerDocument.doctype.name&&xe(Ca,x.ownerDocument.doctype.name)&&(Se="<!DOCTYPE "+x.ownerDocument.doctype.name+`>
`+Se),Zt&&Tn([Rs,Ms,Ls],Ke=>{Se=jr(Se,Ke," ")}),F&&ln?F.createHTML(Se):Se},e.setConfig=function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bs(I),$s=!0},e.clearConfig=function(){Jt=null,$s=!1},e.isValidAttribute=function(I,d,x){Jt||Bs({});let k=se(I),q=se(d);return Oo(k,q,x)},e.addHook=function(I,d){typeof d=="function"&&Br(ye[I],d)},e.removeHook=function(I,d){if(d!==void 0){let x=ku(ye[I],d);return x===-1?void 0:Iu(ye[I],x,1)[0]}return _a(ye[I])},e.removeHooks=function(I){ye[I]=[]},e.removeAllHooks=function(){ye=wa()},e}var bi=Na();function Oa(t){try{z.setOptions({breaks:!0,gfm:!0});let e=z.parse(t),r=typeof e=="string"?e:String(e);return Vu(r)}catch(e){return console.warn("Markdown parsing failed:",e),An(t)}}function An(t){return bi.sanitize(t,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]})}function Vu(t){return bi.sanitize(t,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","b","em","i","ul","ol","li","a","blockquote","br","p","code","pre","table","thead","tbody","tr","th","td"],ALLOWED_ATTR:["href","target","rel","class","id"],ALLOW_DATA_ATTR:!1,KEEP_CONTENT:!0})}async function Ra(t){try{let e=await fetch(t);return e.ok?await e.text():(console.warn(`Failed to load icon from URL: ${t}`),"")}catch(e){return console.warn(`Error loading icon from URL: ${t}`,e),""}}function Ma(t){return navigator.clipboard.writeText(t)}function kn(t){document.body.style.marginRight="400px",document.body.style.transition="margin-right 0.4s ease",document.documentElement.style.setProperty("--agent-ui-header-height",`${t}px`)}function In(){document.body.style.marginRight="0",setTimeout(()=>{document.body.style.transition=""},400)}var La="400px";var Pa="0.8s cubic-bezier(0.4, 0, 0.2, 1)",Ei={HEADER_HEIGHT:"--agent-ui-header-height",BRAND_COLOR:"--agent-ui-brand-color",BRAND_COLOR_LIGHT:"--agent-ui-brand-color-light"},Da={TOGGLE:"k"},B={BACKDROP:"backdrop",CONTAINER:"container",EXPANDED:"expanded",PANEL_MODE:"panel-mode",VISIBLE:"visible",INPUT_FOCUSED:"input-focused",MESSAGE:"message",USER_MESSAGE:"user-message",AGENT_MESSAGE:"agent-message",MESSAGE_CONTAINER:"message-container",INPUT_CONTAINER:"input-container",INPUT_WRAPPER:"input-wrapper",INPUT_FIELD:"input-field",SEND_BUTTON:"send-button",TOGGLE_BUTTON:"toggle-button",PANEL_TOGGLE_BUTTON:"panel-toggle-button",COPY_BUTTON:"copy-button",TYPING_INDICATOR:"typing-indicator",HEADER_BAR:"header-bar",HEADER_TITLE:"header-title"};var p={};Zs(p,{BRAND:()=>vd,DIRTY:()=>kt,EMPTY_PATH:()=>Xu,INVALID:()=>N,NEVER:()=>tf,OK:()=>ge,ParseStatus:()=>le,Schema:()=>P,ZodAny:()=>ft,ZodArray:()=>st,ZodBigInt:()=>Ct,ZodBoolean:()=>Nt,ZodBranded:()=>Xr,ZodCatch:()=>Gt,ZodDate:()=>Ot,ZodDefault:()=>Ht,ZodDiscriminatedUnion:()=>On,ZodEffects:()=>Me,ZodEnum:()=>Ut,ZodError:()=>we,ZodFirstPartyTypeKind:()=>O,ZodFunction:()=>Mn,ZodIntersection:()=>Pt,ZodIssueCode:()=>y,ZodLazy:()=>Dt,ZodLiteral:()=>$t,ZodMap:()=>cr,ZodNaN:()=>dr,ZodNativeEnum:()=>Ft,ZodNever:()=>De,ZodNull:()=>Mt,ZodNullable:()=>je,ZodNumber:()=>It,ZodObject:()=>Ae,ZodOptional:()=>Oe,ZodParsedType:()=>S,ZodPipeline:()=>Kr,ZodPromise:()=>pt,ZodReadonly:()=>zt,ZodRecord:()=>Rn,ZodSchema:()=>P,ZodSet:()=>ur,ZodString:()=>dt,ZodSymbol:()=>ar,ZodTransformer:()=>Me,ZodTuple:()=>Be,ZodType:()=>P,ZodUndefined:()=>Rt,ZodUnion:()=>Lt,ZodUnknown:()=>nt,ZodVoid:()=>lr,addIssueToContext:()=>E,any:()=>Ad,array:()=>Nd,bigint:()=>bd,boolean:()=>Za,coerce:()=>ef,custom:()=>ja,date:()=>Ed,datetimeRegex:()=>za,defaultErrorMap:()=>tt,discriminatedUnion:()=>Ld,effect:()=>Wd,enum:()=>Bd,function:()=>Hd,getErrorMap:()=>sr,getParsedType:()=>ze,instanceof:()=>yd,intersection:()=>Pd,isAborted:()=>Cn,isAsync:()=>ir,isDirty:()=>Nn,isValid:()=>ut,late:()=>_d,lazy:()=>Gd,literal:()=>zd,makeIssue:()=>qr,map:()=>Ud,nan:()=>xd,nativeEnum:()=>jd,never:()=>Id,null:()=>wd,nullable:()=>qd,number:()=>Wa,object:()=>Od,objectUtil:()=>Ti,oboolean:()=>Qd,onumber:()=>Jd,optional:()=>Zd,ostring:()=>Yd,pipeline:()=>Kd,preprocess:()=>Xd,promise:()=>Vd,quotelessJson:()=>Wu,record:()=>$d,set:()=>Fd,setErrorMap:()=>qu,strictObject:()=>Rd,string:()=>Va,symbol:()=>Td,transformer:()=>Wd,tuple:()=>Dd,undefined:()=>Sd,union:()=>Md,unknown:()=>kd,util:()=>U,void:()=>Cd});var U;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(U||(U={}));var Ti;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ti||(Ti={}));var S=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ze=t=>{switch(typeof t){case"undefined":return S.undefined;case"string":return S.string;case"number":return Number.isNaN(t)?S.nan:S.number;case"boolean":return S.boolean;case"function":return S.function;case"bigint":return S.bigint;case"symbol":return S.symbol;case"object":return Array.isArray(t)?S.array:t===null?S.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?S.promise:typeof Map<"u"&&t instanceof Map?S.map:typeof Set<"u"&&t instanceof Set?S.set:typeof Date<"u"&&t instanceof Date?S.date:S.object;default:return S.unknown}};var y=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Wu=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),we=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){let c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)if(s.path.length>0){let i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};we.create=t=>new we(t);var Zu=(t,e)=>{let r;switch(t.code){case y.invalid_type:t.received===S.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case y.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,U.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:r=`Unrecognized key(s) in object: ${U.joinValues(t.keys,", ")}`;break;case y.invalid_union:r="Invalid input";break;case y.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${U.joinValues(t.options)}`;break;case y.invalid_enum_value:r=`Invalid enum value. Expected ${U.joinValues(t.options)}, received '${t.received}'`;break;case y.invalid_arguments:r="Invalid function arguments";break;case y.invalid_return_type:r="Invalid function return type";break;case y.invalid_date:r="Invalid date";break;case y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:U.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case y.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case y.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case y.custom:r="Invalid input";break;case y.invalid_intersection_types:r="Intersection results could not be merged";break;case y.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case y.not_finite:r="Number must be finite";break;default:r=e.defaultError,U.assertNever(t)}return{message:r}},tt=Zu;var $a=tt;function qu(t){$a=t}function sr(){return $a}var qr=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",l=n.filter(c=>!!c).slice().reverse();for(let c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},Xu=[];function E(t,e){let r=sr(),n=qr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===tt?void 0:tt].filter(s=>!!s)});t.common.issues.push(n)}var le=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return N;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return N;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},N=Object.freeze({status:"aborted"}),kt=t=>({status:"dirty",value:t}),ge=t=>({status:"valid",value:t}),Cn=t=>t.status==="aborted",Nn=t=>t.status==="dirty",ut=t=>t.status==="valid",ir=t=>typeof Promise<"u"&&t instanceof Promise;var A;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(A||(A={}));var Re=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ua=(t,e)=>{if(ut(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new we(t.common.issues);return this._error=r,this._error}}};function L(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{let{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??n??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??r??a.defaultError}},description:s}}var P=class{get description(){return this._def.description}_getType(e){return ze(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ze(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new le,ctx:{common:e.parent.common,data:e.data,parsedType:ze(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(ir(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ze(e)},s=this._parseSync({data:e,path:n.path,parent:n});return Ua(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ze(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return ut(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>ut(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ze(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(ir(s)?s:Promise.resolve(s));return Ua(n,i)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:y.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Me({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Oe.create(this,this._def)}nullable(){return je.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return st.create(this)}promise(){return pt.create(this,this._def)}or(e){return Lt.create([this,e],this._def)}and(e){return Pt.create(this,e,this._def)}transform(e){return new Me({...L(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ht({...L(this._def),innerType:this,defaultValue:r,typeName:O.ZodDefault})}brand(){return new Xr({typeName:O.ZodBranded,type:this,...L(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Gt({...L(this._def),innerType:this,catchValue:r,typeName:O.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Kr.create(this,e)}readonly(){return zt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Ku=/^c[^\s-]{8,}$/i,Yu=/^[0-9a-z]+$/,Ju=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Qu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ed=/^[a-z0-9_-]{21}$/i,td=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rd=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sd="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Si,id=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,od=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ad=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ld=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ud=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ha="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dd=new RegExp(`^${Ha}$`);function Ga(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function fd(t){return new RegExp(`^${Ga(t)}$`)}function za(t){let e=`${Ha}T${Ga(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function pd(t,e){return!!((e==="v4"||!e)&&id.test(t)||(e==="v6"||!e)&&ad.test(t))}function hd(t,e){if(!td.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function md(t,e){return!!((e==="v4"||!e)&&od.test(t)||(e==="v6"||!e)&&ld.test(t))}var dt=class t extends P{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==S.string){let i=this._getOrReturnCtx(e);return E(i,{code:y.invalid_type,expected:S.string,received:i.parsedType}),N}let n=new le,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),E(s,{code:y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),E(s,{code:y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?E(s,{code:y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&E(s,{code:y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")nd.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"email",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Si||(Si=new RegExp(sd,"u")),Si.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"emoji",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Qu.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"uuid",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")ed.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"nanoid",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Ku.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"cuid",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Yu.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"cuid2",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Ju.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"ulid",code:y.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),E(s,{validation:"url",code:y.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"regex",code:y.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?za(i).test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?dd.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?fd(i).test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{code:y.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?rd.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"duration",code:y.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?pd(e.data,i.version)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"ip",code:y.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?hd(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"jwt",code:y.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?md(e.data,i.version)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"cidr",code:y.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?cd.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"base64",code:y.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?ud.test(e.data)||(s=this._getOrReturnCtx(e,s),E(s,{validation:"base64url",code:y.invalid_string,message:i.message}),n.dirty()):U.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:y.invalid_string,...A.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...A.errToObj(e)})}url(e){return this._addCheck({kind:"url",...A.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...A.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...A.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...A.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...A.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...A.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...A.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...A.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...A.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...A.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...A.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...A.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...A.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...A.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...A.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...A.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...A.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...A.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...A.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...A.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...A.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...A.errToObj(r)})}nonempty(e){return this.min(1,A.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};dt.create=t=>new dt({checks:[],typeName:O.ZodString,coerce:t?.coerce??!1,...L(t)});function gd(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}var It=class t extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==S.number){let i=this._getOrReturnCtx(e);return E(i,{code:y.invalid_type,expected:S.number,received:i.parsedType}),N}let n,s=new le;for(let i of this._def.checks)i.kind==="int"?U.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:y.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?gd(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),E(n,{code:y.not_finite,message:i.message}),s.dirty()):U.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,A.toString(r))}gt(e,r){return this.setLimit("min",e,!1,A.toString(r))}lte(e,r){return this.setLimit("max",e,!0,A.toString(r))}lt(e,r){return this.setLimit("max",e,!1,A.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:A.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:A.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:A.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:A.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:A.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:A.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};It.create=t=>new It({checks:[],typeName:O.ZodNumber,coerce:t?.coerce||!1,...L(t)});var Ct=class t extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==S.bigint)return this._getInvalidInput(e);let n,s=new le;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),E(n,{code:y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):U.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return E(r,{code:y.invalid_type,expected:S.bigint,received:r.parsedType}),N}gte(e,r){return this.setLimit("min",e,!0,A.toString(r))}gt(e,r){return this.setLimit("min",e,!1,A.toString(r))}lte(e,r){return this.setLimit("max",e,!0,A.toString(r))}lt(e,r){return this.setLimit("max",e,!1,A.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:A.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:A.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ct.create=t=>new Ct({checks:[],typeName:O.ZodBigInt,coerce:t?.coerce??!1,...L(t)});var Nt=class extends P{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==S.boolean){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.boolean,received:n.parsedType}),N}return ge(e.data)}};Nt.create=t=>new Nt({typeName:O.ZodBoolean,coerce:t?.coerce||!1,...L(t)});var Ot=class t extends P{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==S.date){let i=this._getOrReturnCtx(e);return E(i,{code:y.invalid_type,expected:S.date,received:i.parsedType}),N}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return E(i,{code:y.invalid_date}),N}let n=new le,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),E(s,{code:y.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),E(s,{code:y.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):U.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:A.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:A.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ot.create=t=>new Ot({checks:[],coerce:t?.coerce||!1,typeName:O.ZodDate,...L(t)});var ar=class extends P{_parse(e){if(this._getType(e)!==S.symbol){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.symbol,received:n.parsedType}),N}return ge(e.data)}};ar.create=t=>new ar({typeName:O.ZodSymbol,...L(t)});var Rt=class extends P{_parse(e){if(this._getType(e)!==S.undefined){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.undefined,received:n.parsedType}),N}return ge(e.data)}};Rt.create=t=>new Rt({typeName:O.ZodUndefined,...L(t)});var Mt=class extends P{_parse(e){if(this._getType(e)!==S.null){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.null,received:n.parsedType}),N}return ge(e.data)}};Mt.create=t=>new Mt({typeName:O.ZodNull,...L(t)});var ft=class extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return ge(e.data)}};ft.create=t=>new ft({typeName:O.ZodAny,...L(t)});var nt=class extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ge(e.data)}};nt.create=t=>new nt({typeName:O.ZodUnknown,...L(t)});var De=class extends P{_parse(e){let r=this._getOrReturnCtx(e);return E(r,{code:y.invalid_type,expected:S.never,received:r.parsedType}),N}};De.create=t=>new De({typeName:O.ZodNever,...L(t)});var lr=class extends P{_parse(e){if(this._getType(e)!==S.undefined){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.void,received:n.parsedType}),N}return ge(e.data)}};lr.create=t=>new lr({typeName:O.ZodVoid,...L(t)});var st=class t extends P{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==S.array)return E(r,{code:y.invalid_type,expected:S.array,received:r.parsedType}),N;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(E(r,{code:o?y.too_big:y.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(E(r,{code:y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(E(r,{code:y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Re(r,o,r.path,a)))).then(o=>le.mergeArray(n,o));let i=[...r.data].map((o,a)=>s.type._parseSync(new Re(r,o,r.path,a)));return le.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:A.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:A.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:A.toString(r)}})}nonempty(e){return this.min(1,e)}};st.create=(t,e)=>new st({type:t,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...L(e)});function or(t){if(t instanceof Ae){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Oe.create(or(n))}return new Ae({...t._def,shape:()=>e})}else return t instanceof st?new st({...t._def,type:or(t.element)}):t instanceof Oe?Oe.create(or(t.unwrap())):t instanceof je?je.create(or(t.unwrap())):t instanceof Be?Be.create(t.items.map(e=>or(e))):t}var Ae=class t extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=U.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==S.object){let c=this._getOrReturnCtx(e);return E(c,{code:y.invalid_type,expected:S.object,received:c.parsedType}),N}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof De&&this._def.unknownKeys==="strip"))for(let c in s.data)o.includes(c)||a.push(c);let l=[];for(let c of o){let u=i[c],m=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Re(s,m,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof De){let c=this._def.unknownKeys;if(c==="passthrough")for(let u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(E(s,{code:y.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let u of a){let m=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Re(s,m,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let c=[];for(let u of l){let m=await u.key,g=await u.value;c.push({key:m,value:g,alwaysSet:u.alwaysSet})}return c}).then(c=>le.mergeObjectSync(n,c)):le.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return A.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:A.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of U.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of U.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return or(this)}partial(e){let r={};for(let n of U.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of U.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Oe;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:()=>r})}keyof(){return Ba(U.objectKeys(this.shape))}};Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:De.create(),typeName:O.ZodObject,...L(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:De.create(),typeName:O.ZodObject,...L(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:De.create(),typeName:O.ZodObject,...L(e)});var Lt=class extends P{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new we(a.ctx.common.issues));return E(r,{code:y.invalid_union,unionErrors:o}),N}if(r.common.async)return Promise.all(n.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let l of n){let c={...r,common:{...r.common,issues:[]},parent:null},u=l._parseSync({data:r.data,path:r.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(l=>new we(l));return E(r,{code:y.invalid_union,unionErrors:a}),N}}get options(){return this._def.options}};Lt.create=(t,e)=>new Lt({options:t,typeName:O.ZodUnion,...L(e)});var rt=t=>t instanceof Dt?rt(t.schema):t instanceof Me?rt(t.innerType()):t instanceof $t?[t.value]:t instanceof Ut?t.options:t instanceof Ft?U.objectValues(t.enum):t instanceof Ht?rt(t._def.innerType):t instanceof Rt?[void 0]:t instanceof Mt?[null]:t instanceof Oe?[void 0,...rt(t.unwrap())]:t instanceof je?[null,...rt(t.unwrap())]:t instanceof Xr||t instanceof zt?rt(t.unwrap()):t instanceof Gt?rt(t._def.innerType):[],On=class t extends P{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.object)return E(r,{code:y.invalid_type,expected:S.object,received:r.parsedType}),N;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(E(r,{code:y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),N)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let o=rt(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new t({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...L(n)})}};function wi(t,e){let r=ze(t),n=ze(e);if(t===e)return{valid:!0,data:t};if(r===S.object&&n===S.object){let s=U.objectKeys(e),i=U.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(let a of i){let l=wi(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===S.array&&n===S.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],l=wi(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return r===S.date&&n===S.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Pt=class extends P{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Cn(i)||Cn(o))return N;let a=wi(i.value,o.value);return a.valid?((Nn(i)||Nn(o))&&r.dirty(),{status:r.value,value:a.data}):(E(n,{code:y.invalid_intersection_types}),N)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Pt.create=(t,e,r)=>new Pt({left:t,right:e,typeName:O.ZodIntersection,...L(r)});var Be=class t extends P{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.array)return E(n,{code:y.invalid_type,expected:S.array,received:n.parsedType}),N;if(n.data.length<this._def.items.length)return E(n,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),N;!this._def.rest&&n.data.length>this._def.items.length&&(E(n,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((o,a)=>{let l=this._def.items[a]||this._def.rest;return l?l._parse(new Re(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>le.mergeArray(r,o)):le.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Be.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Be({items:t,typeName:O.ZodTuple,rest:null,...L(e)})};var Rn=class t extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.object)return E(n,{code:y.invalid_type,expected:S.object,received:n.parsedType}),N;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new Re(n,a,n.path,a)),value:o._parse(new Re(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?le.mergeObjectAsync(r,s):le.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof P?new t({keyType:e,valueType:r,typeName:O.ZodRecord,...L(n)}):new t({keyType:dt.create(),valueType:e,typeName:O.ZodRecord,...L(r)})}},cr=class extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.map)return E(n,{code:y.invalid_type,expected:S.map,received:n.parsedType}),N;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:s._parse(new Re(n,a,n.path,[c,"key"])),value:i._parse(new Re(n,l,n.path,[c,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let l of o){let c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return N;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let l of o){let c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return N;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}}}};cr.create=(t,e,r)=>new cr({valueType:e,keyType:t,typeName:O.ZodMap,...L(r)});var ur=class t extends P{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.set)return E(n,{code:y.invalid_type,expected:S.set,received:n.parsedType}),N;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(E(n,{code:y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(E(n,{code:y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function o(l){let c=new Set;for(let u of l){if(u.status==="aborted")return N;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}let a=[...n.data.values()].map((l,c)=>i._parse(new Re(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:A.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:A.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ur.create=(t,e)=>new ur({valueType:t,minSize:null,maxSize:null,typeName:O.ZodSet,...L(e)});var Mn=class t extends P{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.function)return E(r,{code:y.invalid_type,expected:S.function,received:r.parsedType}),N;function n(a,l){return qr({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sr(),tt].filter(c=>!!c),issueData:{code:y.invalid_arguments,argumentsError:l}})}function s(a,l){return qr({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sr(),tt].filter(c=>!!c),issueData:{code:y.invalid_return_type,returnTypeError:l}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof pt){let a=this;return ge(async function(...l){let c=new we([]),u=await a._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(n(l,h)),c}),m=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(m,i).catch(h=>{throw c.addIssue(s(m,h)),c})})}else{let a=this;return ge(function(...l){let c=a._def.args.safeParse(l,i);if(!c.success)throw new we([n(l,c.error)]);let u=Reflect.apply(o,this,c.data),m=a._def.returns.safeParse(u,i);if(!m.success)throw new we([s(u,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Be.create(e).rest(nt.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Be.create([]).rest(nt.create()),returns:r||nt.create(),typeName:O.ZodFunction,...L(n)})}},Dt=class extends P{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Dt.create=(t,e)=>new Dt({getter:t,typeName:O.ZodLazy,...L(e)});var $t=class extends P{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return E(r,{received:r.data,code:y.invalid_literal,expected:this._def.value}),N}return{status:"valid",value:e.data}}get value(){return this._def.value}};$t.create=(t,e)=>new $t({value:t,typeName:O.ZodLiteral,...L(e)});function Ba(t,e){return new Ut({values:t,typeName:O.ZodEnum,...L(e)})}var Ut=class t extends P{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return E(r,{expected:U.joinValues(n),received:r.parsedType,code:y.invalid_type}),N}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return E(r,{received:r.data,code:y.invalid_enum_value,options:n}),N}return ge(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Ut.create=Ba;var Ft=class extends P{_parse(e){let r=U.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==S.string&&n.parsedType!==S.number){let s=U.objectValues(r);return E(n,{expected:U.joinValues(s),received:n.parsedType,code:y.invalid_type}),N}if(this._cache||(this._cache=new Set(U.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let s=U.objectValues(r);return E(n,{received:n.data,code:y.invalid_enum_value,options:s}),N}return ge(e.data)}get enum(){return this._def.values}};Ft.create=(t,e)=>new Ft({values:t,typeName:O.ZodNativeEnum,...L(e)});var pt=class extends P{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.promise&&r.common.async===!1)return E(r,{code:y.invalid_type,expected:S.promise,received:r.parsedType}),N;let n=r.parsedType===S.promise?r.data:Promise.resolve(r.data);return ge(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};pt.create=(t,e)=>new pt({type:t,typeName:O.ZodPromise,...L(e)});var Me=class extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{E(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return N;let l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?N:l.status==="dirty"?kt(l.value):r.value==="dirty"?kt(l.value):l});{if(r.value==="aborted")return N;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?N:a.status==="dirty"?kt(a.value):r.value==="dirty"?kt(a.value):a}}if(s.type==="refinement"){let o=a=>{let l=s.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?N:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?N:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ut(o))return N;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ut(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):N);U.assertNever(s)}};Me.create=(t,e,r)=>new Me({schema:t,typeName:O.ZodEffects,effect:e,...L(r)});Me.createWithPreprocess=(t,e,r)=>new Me({schema:e,effect:{type:"preprocess",transform:t},typeName:O.ZodEffects,...L(r)});var Oe=class extends P{_parse(e){return this._getType(e)===S.undefined?ge(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Oe.create=(t,e)=>new Oe({innerType:t,typeName:O.ZodOptional,...L(e)});var je=class extends P{_parse(e){return this._getType(e)===S.null?ge(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};je.create=(t,e)=>new je({innerType:t,typeName:O.ZodNullable,...L(e)});var Ht=class extends P{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===S.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ht.create=(t,e)=>new Ht({innerType:t,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...L(e)});var Gt=class extends P{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ir(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new we(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new we(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Gt.create=(t,e)=>new Gt({innerType:t,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...L(e)});var dr=class extends P{_parse(e){if(this._getType(e)!==S.nan){let n=this._getOrReturnCtx(e);return E(n,{code:y.invalid_type,expected:S.nan,received:n.parsedType}),N}return{status:"valid",value:e.data}}};dr.create=t=>new dr({typeName:O.ZodNaN,...L(t)});var vd=Symbol("zod_brand"),Xr=class extends P{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Kr=class t extends P{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?N:i.status==="dirty"?(r.dirty(),kt(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?N:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:O.ZodPipeline})}},zt=class extends P{_parse(e){let r=this._def.innerType._parse(e),n=s=>(ut(s)&&(s.value=Object.freeze(s.value)),s);return ir(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};zt.create=(t,e)=>new zt({innerType:t,typeName:O.ZodReadonly,...L(e)});function Fa(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function ja(t,e={},r){return t?ft.create().superRefine((n,s)=>{let i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){let a=Fa(e,n),l=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:l})}});if(!i){let o=Fa(e,n),a=o.fatal??r??!0;s.addIssue({code:"custom",...o,fatal:a})}}):ft.create()}var _d={object:Ae.lazycreate},O;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(O||(O={}));var yd=(t,e={message:`Input not instance of ${t.name}`})=>ja(r=>r instanceof t,e),Va=dt.create,Wa=It.create,xd=dr.create,bd=Ct.create,Za=Nt.create,Ed=Ot.create,Td=ar.create,Sd=Rt.create,wd=Mt.create,Ad=ft.create,kd=nt.create,Id=De.create,Cd=lr.create,Nd=st.create,Od=Ae.create,Rd=Ae.strictCreate,Md=Lt.create,Ld=On.create,Pd=Pt.create,Dd=Be.create,$d=Rn.create,Ud=cr.create,Fd=ur.create,Hd=Mn.create,Gd=Dt.create,zd=$t.create,Bd=Ut.create,jd=Ft.create,Vd=pt.create,Wd=Me.create,Zd=Oe.create,qd=je.create,Xd=Me.createWithPreprocess,Kd=Kr.create,Yd=()=>Va().optional(),Jd=()=>Wa().optional(),Qd=()=>Za().optional(),ef={string:t=>dt.create({...t,coerce:!0}),number:t=>It.create({...t,coerce:!0}),boolean:t=>Nt.create({...t,coerce:!0}),bigint:t=>Ct.create({...t,coerce:!0}),date:t=>Ot.create({...t,coerce:!0})};var tf=N;var rf=p.object({name:p.string(),arguments:p.string()}),nf=p.object({id:p.string(),type:p.literal("function"),function:rf}),Ln=p.object({id:p.string(),role:p.string(),content:p.string().optional(),name:p.string().optional()}),sf=Ln.extend({role:p.literal("developer"),content:p.string()}),of=Ln.extend({role:p.literal("system"),content:p.string()}),af=Ln.extend({role:p.literal("assistant"),content:p.string().optional(),toolCalls:p.array(nf).optional()}),lf=Ln.extend({role:p.literal("user"),content:p.string()}),cf=p.object({id:p.string(),content:p.string(),role:p.literal("tool"),toolCallId:p.string()}),qa=p.discriminatedUnion("role",[sf,of,af,lf,cf]),Tm=p.union([p.literal("developer"),p.literal("system"),p.literal("assistant"),p.literal("user"),p.literal("tool")]),uf=p.object({description:p.string(),value:p.string()}),df=p.object({name:p.string(),description:p.string(),parameters:p.any()}),Sm=p.object({threadId:p.string(),runId:p.string(),state:p.any(),messages:p.array(qa),tools:p.array(df),context:p.array(uf),forwardedProps:p.any()}),ff=p.any(),W=class extends Error{constructor(t){super(t)}},_=(t=>(t.TEXT_MESSAGE_START="TEXT_MESSAGE_START",t.TEXT_MESSAGE_CONTENT="TEXT_MESSAGE_CONTENT",t.TEXT_MESSAGE_END="TEXT_MESSAGE_END",t.TEXT_MESSAGE_CHUNK="TEXT_MESSAGE_CHUNK",t.THINKING_TEXT_MESSAGE_START="THINKING_TEXT_MESSAGE_START",t.THINKING_TEXT_MESSAGE_CONTENT="THINKING_TEXT_MESSAGE_CONTENT",t.THINKING_TEXT_MESSAGE_END="THINKING_TEXT_MESSAGE_END",t.TOOL_CALL_START="TOOL_CALL_START",t.TOOL_CALL_ARGS="TOOL_CALL_ARGS",t.TOOL_CALL_END="TOOL_CALL_END",t.TOOL_CALL_CHUNK="TOOL_CALL_CHUNK",t.TOOL_CALL_RESULT="TOOL_CALL_RESULT",t.THINKING_START="THINKING_START",t.THINKING_END="THINKING_END",t.STATE_SNAPSHOT="STATE_SNAPSHOT",t.STATE_DELTA="STATE_DELTA",t.MESSAGES_SNAPSHOT="MESSAGES_SNAPSHOT",t.RAW="RAW",t.CUSTOM="CUSTOM",t.RUN_STARTED="RUN_STARTED",t.RUN_FINISHED="RUN_FINISHED",t.RUN_ERROR="RUN_ERROR",t.STEP_STARTED="STEP_STARTED",t.STEP_FINISHED="STEP_FINISHED",t))(_||{}),Y=p.object({type:p.nativeEnum(_),timestamp:p.number().optional(),rawEvent:p.any().optional()}),pf=Y.extend({type:p.literal("TEXT_MESSAGE_START"),messageId:p.string(),role:p.literal("assistant")}),Xa=Y.extend({type:p.literal("TEXT_MESSAGE_CONTENT"),messageId:p.string(),delta:p.string().refine(t=>t.length>0,"Delta must not be an empty string")}),hf=Y.extend({type:p.literal("TEXT_MESSAGE_END"),messageId:p.string()}),mf=Y.extend({type:p.literal("TEXT_MESSAGE_CHUNK"),messageId:p.string().optional(),role:p.literal("assistant").optional(),delta:p.string().optional()}),gf=Y.extend({type:p.literal("THINKING_TEXT_MESSAGE_START")}),vf=Xa.omit({messageId:!0,type:!0}).extend({type:p.literal("THINKING_TEXT_MESSAGE_CONTENT")}),_f=Y.extend({type:p.literal("THINKING_TEXT_MESSAGE_END")}),yf=Y.extend({type:p.literal("TOOL_CALL_START"),toolCallId:p.string(),toolCallName:p.string(),parentMessageId:p.string().optional()}),xf=Y.extend({type:p.literal("TOOL_CALL_ARGS"),toolCallId:p.string(),delta:p.string()}),bf=Y.extend({type:p.literal("TOOL_CALL_END"),toolCallId:p.string()}),Ef=Y.extend({messageId:p.string(),type:p.literal("TOOL_CALL_RESULT"),toolCallId:p.string(),content:p.string(),role:p.literal("tool").optional()}),Tf=Y.extend({type:p.literal("TOOL_CALL_CHUNK"),toolCallId:p.string().optional(),toolCallName:p.string().optional(),parentMessageId:p.string().optional(),delta:p.string().optional()}),Am=Y.extend({type:p.literal("THINKING_START"),title:p.string().optional()}),km=Y.extend({type:p.literal("THINKING_END")}),Sf=Y.extend({type:p.literal("STATE_SNAPSHOT"),snapshot:ff}),wf=Y.extend({type:p.literal("STATE_DELTA"),delta:p.array(p.any())}),Af=Y.extend({type:p.literal("MESSAGES_SNAPSHOT"),messages:p.array(qa)}),kf=Y.extend({type:p.literal("RAW"),event:p.any(),source:p.string().optional()}),If=Y.extend({type:p.literal("CUSTOM"),name:p.string(),value:p.any()}),Cf=Y.extend({type:p.literal("RUN_STARTED"),threadId:p.string(),runId:p.string()}),Nf=Y.extend({type:p.literal("RUN_FINISHED"),threadId:p.string(),runId:p.string(),result:p.any().optional()}),Of=Y.extend({type:p.literal("RUN_ERROR"),message:p.string(),code:p.string().optional()}),Rf=Y.extend({type:p.literal("STEP_STARTED"),stepName:p.string()}),Mf=Y.extend({type:p.literal("STEP_FINISHED"),stepName:p.string()}),Pn=p.discriminatedUnion("type",[pf,Xa,hf,mf,gf,vf,_f,yf,xf,bf,Tf,Ef,Sf,wf,Af,kf,If,Cf,Nf,Of,Rf,Mf]);function D(t){return typeof t=="function"}function Lf(t){return D(t?.lift)}function oe(t){return function(e){if(Lf(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var Ai=function(t,e){return Ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ai(t,e)};function Ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ai(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ka(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(m){o(m)}}function l(u){try{c(n.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function Dn(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function it(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fr(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function pr(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function Ya(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(h){return function(f){return Promise.resolve(f).then(h,m)}}function a(h,f){n[h]&&(s[h]=function(v){return new Promise(function(T,b){i.push([h,v,T,b])>1||l(h,v)})},f&&(s[h]=f(s[h])))}function l(h,f){try{c(n[h](f))}catch(v){g(i[0][3],v)}}function c(h){h.value instanceof Bt?Promise.resolve(h.value.v).then(u,m):g(i[0][2],h)}function u(h){l("next",h)}function m(h){l("throw",h)}function g(h,f){h(f),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Ja(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof it=="function"?it(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}var $n=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Un(t){return D(t?.then)}function hr(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Fn=hr(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Yr(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var mr=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,s,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=it(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(D(u))try{u()}catch(v){i=v instanceof Fn?v.errors:[v]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var g=it(m),h=g.next();!h.done;h=g.next()){var f=h.value;try{Qa(f)}catch(v){i=i??[],v instanceof Fn?i=pr(pr([],fr(i)),fr(v.errors)):i.push(v)}}}catch(v){n={error:v}}finally{try{h&&!h.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}}if(i)throw new Fn(i)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Qa(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Yr(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Yr(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();var ki=mr.EMPTY;function Hn(t){return t instanceof mr||t&&"closed"in t&&D(t.remove)&&D(t.add)&&D(t.unsubscribe)}function Qa(t){D(t)?t():t.unsubscribe()}var $e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gr={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s=gr.delegate;return s?.setTimeout?s.setTimeout.apply(s,pr([t,e],fr(r))):setTimeout.apply(void 0,pr([t,e],fr(r)))},clearTimeout:function(t){var e=gr.delegate;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gn(t){gr.setTimeout(function(){var e=$e.onUnhandledError;if(e)e(t);else throw t})}function Ii(){}var el=function(){return Ci("C",void 0,void 0)}();function tl(t){return Ci("E",void 0,t)}function rl(t){return Ci("N",t,void 0)}function Ci(t,e,r){return{kind:t,value:e,error:r}}var jt=null;function vr(t){if($e.useDeprecatedSynchronousErrorHandling){var e=!jt;if(e&&(jt={errorThrown:!1,error:null}),t(),e){var r=jt,n=r.errorThrown,s=r.error;if(jt=null,n)throw s}}else t()}function nl(t){$e.useDeprecatedSynchronousErrorHandling&&jt&&(jt.errorThrown=!0,jt.error=t)}var Jr=function(t){Ve(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Hn(r)&&r.add(n)):n.destination=Uf,n}return e.create=function(r,n,s){return new Bn(r,n,s)},e.prototype.next=function(r){this.isStopped?Oi(rl(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?Oi(tl(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?Oi(el,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(mr);var Pf=Function.prototype.bind;function Ni(t,e){return Pf.call(t,e)}var Df=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){zn(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){zn(n)}else zn(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){zn(r)}},t}(),Bn=function(t){Ve(e,t);function e(r,n,s){var i=t.call(this)||this,o;if(D(r)||!r)o={next:r??void 0,error:n??void 0,complete:s??void 0};else{var a;i&&$e.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},o={next:r.next&&Ni(r.next,a),error:r.error&&Ni(r.error,a),complete:r.complete&&Ni(r.complete,a)}):o=r}return i.destination=new Df(o),i}return e}(Jr);function zn(t){$e.useDeprecatedSynchronousErrorHandling?nl(t):Gn(t)}function $f(t){throw t}function Oi(t,e){var r=$e.onStoppedNotification;r&&gr.setTimeout(function(){return r(t,e)})}var Uf={closed:!0,next:Ii,error:$f,complete:Ii};var _r=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function yr(t){return t}function Ri(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mi(t)}function Mi(t){return t.length===0?yr:t.length===1?t[0]:function(r){return t.reduce(function(n,s){return s(n)},r)}}var Z=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var s=this,i=Hf(e)?e:new Bn(e,r,n);return vr(function(){var o=s,a=o.operator,l=o.source;i.add(a?a.call(i,l):l?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=sl(r),new r(function(s,i){var o=new Bn({next:function(a){try{e(a)}catch(l){i(l),o.unsubscribe()}},error:i,complete:s});n.subscribe(o)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[_r]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Mi(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=sl(e),new e(function(n,s){var i;r.subscribe(function(o){return i=o},function(o){return s(o)},function(){return n(i)})})},t.create=function(e){return new t(e)},t}();function sl(t){var e;return(e=t??$e.Promise)!==null&&e!==void 0?e:Promise}function Ff(t){return t&&D(t.next)&&D(t.error)&&D(t.complete)}function Hf(t){return t&&t instanceof Jr||Ff(t)&&Hn(t)}function jn(t){return D(t[_r])}function Vn(t){return Symbol.asyncIterator&&D(t?.[Symbol.asyncIterator])}function Wn(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Gf(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zn=Gf();function qn(t){return D(t?.[Zn])}function Xn(t){return Ya(this,arguments,function(){var r,n,s,i;return Dn(this,function(o){switch(o.label){case 0:r=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Bt(r.read())];case 3:return n=o.sent(),s=n.value,i=n.done,i?[4,Bt(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Bt(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Kn(t){return D(t?.getReader)}function ve(t){if(t instanceof Z)return t;if(t!=null){if(jn(t))return zf(t);if($n(t))return Bf(t);if(Un(t))return jf(t);if(Vn(t))return il(t);if(qn(t))return Vf(t);if(Kn(t))return Wf(t)}throw Wn(t)}function zf(t){return new Z(function(e){var r=t[_r]();if(D(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Bf(t){return new Z(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function jf(t){return new Z(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Gn)})}function Vf(t){return new Z(function(e){var r,n;try{for(var s=it(t),i=s.next();!i.done;i=s.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}e.complete()})}function il(t){return new Z(function(e){Zf(t,e).catch(function(r){return e.error(r)})})}function Wf(t){return il(Xn(t))}function Zf(t,e){var r,n,s,i;return Ka(this,void 0,void 0,function(){var o,a;return Dn(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=Ja(t),l.label=1;case 1:return[4,r.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function _e(t,e,r,n,s){return new qf(t,e,r,n,s)}var qf=function(t){Ve(e,t);function e(r,n,s,i,o,a){var l=t.call(this,r)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(u){r.error(u)}}:t.prototype._next,l._error=i?function(c){try{i(c)}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=s?function(){try{s()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(Jr);var Li={now:function(){return(Li.delegate||Date).now()},delegate:void 0};function ol(t){return t&&D(t.schedule)}function Xf(t){return t[t.length-1]}function al(t){return ol(Xf(t))?t.pop():void 0}function Le(t,e,r,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var i=e.schedule(function(){r(),s?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(i),!s)return i}function Yn(t){return oe(function(e,r){var n=null,s=!1,i;n=e.subscribe(_e(r,void 0,void 0,function(o){i=ve(t(o,Yn(t)(e))),n?(n.unsubscribe(),n=null,i.subscribe(r)):s=!0})),s&&(n.unsubscribe(),n=null,i.subscribe(r))})}function Jn(t,e){return e===void 0&&(e=0),oe(function(r,n){r.subscribe(_e(n,function(s){return Le(n,t,function(){return n.next(s)},e)},function(){return Le(n,t,function(){return n.complete()},e)},function(s){return Le(n,t,function(){return n.error(s)},e)}))})}function Qn(t,e){return e===void 0&&(e=0),oe(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function ll(t,e){return ve(t).pipe(Qn(e),Jn(e))}function cl(t,e){return ve(t).pipe(Qn(e),Jn(e))}function ul(t,e){return new Z(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function dl(t,e){return new Z(function(r){var n;return Le(r,e,function(){n=t[Zn](),Le(r,e,function(){var s,i,o;try{s=n.next(),i=s.value,o=s.done}catch(a){r.error(a);return}o?r.complete():r.next(i)},0,!0)}),function(){return D(n?.return)&&n.return()}})}function es(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(function(r){Le(r,e,function(){var n=t[Symbol.asyncIterator]();Le(r,e,function(){n.next().then(function(s){s.done?r.complete():r.next(s.value)})},0,!0)})})}function fl(t,e){return es(Xn(t),e)}function pl(t,e){if(t!=null){if(jn(t))return ll(t,e);if($n(t))return ul(t,e);if(Un(t))return cl(t,e);if(Vn(t))return es(t,e);if(qn(t))return dl(t,e);if(Kn(t))return fl(t,e)}throw Wn(t)}function Vt(t,e){return e?pl(t,e):ve(t)}function xr(t,e){return oe(function(r,n){var s=0;r.subscribe(_e(n,function(i){n.next(t.call(e,i,s++))}))})}function hl(t,e,r,n,s,i,o,a){var l=[],c=0,u=0,m=!1,g=function(){m&&!l.length&&!c&&e.complete()},h=function(v){return c<n?f(v):l.push(v)},f=function(v){i&&e.next(v),c++;var T=!1;ve(r(v,u++)).subscribe(_e(e,function(b){s?.(b),i?h(b):e.next(b)},function(){T=!0},void 0,function(){if(T)try{c--;for(var b=function(){var R=l.shift();o?Le(e,o,function(){return f(R)}):f(R)};l.length&&c<n;)b();g()}catch(R){e.error(R)}}))};return t.subscribe(_e(e,h,function(){m=!0,g()})),function(){a?.()}}function ke(t,e,r){return r===void 0&&(r=1/0),D(e)?ke(function(n,s){return xr(function(i,o){return e(n,i,s,o)})(ve(t(n,s)))},r):(typeof e=="number"&&(r=e),oe(function(n,s){return hl(n,s,t,r)}))}function Pi(t){return t===void 0&&(t=1/0),ke(yr,t)}function Di(t,e){return D(e)?ke(t,e,1):ke(t,1)}var ml=hr(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var We=function(t){Ve(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new gl(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new ml},e.prototype.next=function(r){var n=this;vr(function(){var s,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=it(n.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(r)}}catch(c){s={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(r){var n=this;vr(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var s=n.observers;s.length;)s.shift().error(r)}})},e.prototype.complete=function(){var r=this;vr(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,s=this,i=s.hasError,o=s.isStopped,a=s.observers;return i||o?ki:(this.currentObservers=null,a.push(r),new mr(function(){n.currentObservers=null,Yr(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,s=n.hasError,i=n.thrownError,o=n.isStopped;s?r.error(i):o&&r.complete()},e.prototype.asObservable=function(){var r=new Z;return r.source=this,r},e.create=function(r,n){return new gl(r,n)},e}(Z);var gl=function(t){Ve(e,t);function e(r,n){var s=t.call(this)||this;return s.destination=r,s.source=n,s}return e.prototype.next=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,r)},e.prototype.error=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&s!==void 0?s:ki},e}(We);function $i(t){return oe(function(e,r){var n=!1;e.subscribe(_e(r,function(s){n=!0,r.next(s)},function(){n||r.next(t),r.complete()}))})}var Ui=new Z(function(t){return t.complete()});function X(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=al(t);return Vt(t,r)}function j(t,e){var r=D(t)?t:function(){return t},n=function(s){return s.error(r())};return new Z(e?function(s){return e.schedule(n,0,s)}:n)}var vl=hr(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function br(t){return oe(function(e,r){try{e.subscribe(r)}finally{r.add(t)}})}var Fi=function(t){Ve(e,t);function e(r,n,s){r===void 0&&(r=1/0),n===void 0&&(n=1/0),s===void 0&&(s=Li);var i=t.call(this)||this;return i._bufferSize=r,i._windowTime=n,i._timestampProvider=s,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,r),i._windowTime=Math.max(1,n),i}return e.prototype.next=function(r){var n=this,s=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,l=n._windowTime;s||(i.push(r),!o&&i.push(a.now()+l)),this._trimBuffer(),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),s=this,i=s._infiniteTimeWindow,o=s._buffer,a=o.slice(),l=0;l<a.length&&!r.closed;l+=i?1:2)r.next(a[l]);return this._checkFinalizedStatuses(r),n},e.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,s=r._timestampProvider,i=r._buffer,o=r._infiniteTimeWindow,a=(o?1:2)*n;if(n<1/0&&a<i.length&&i.splice(0,i.length-a),!o){for(var l=s.now(),c=0,u=1;u<i.length&&i[u]<=l;u+=2)c=u;c&&i.splice(0,c+1)}},e}(We);function Hi(t,e){return oe(function(r,n){var s=null,i=0,o=!1,a=function(){return o&&!s&&n.complete()};r.subscribe(_e(n,function(l){s?.unsubscribe();var c=0,u=i++;ve(t(l,u)).subscribe(s=_e(n,function(m){return n.next(e?e(l,m,u,c++):m)},function(){s=null,a()}))},function(){o=!0,a()}))})}function Gi(t,e,r){var n=D(t)||e||r?{next:t,error:e,complete:r}:t;return n?oe(function(s,i){var o;(o=n.subscribe)===null||o===void 0||o.call(n);var a=!0;s.subscribe(_e(i,function(l){var c;(c=n.next)===null||c===void 0||c.call(n,l),i.next(l)},function(){var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),i.complete()},function(l){var c;a=!1,(c=n.error)===null||c===void 0||c.call(n,l),i.error(l)},function(){var l,c;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):yr}function zi(t,e){var r=typeof e=="object";return new Promise(function(n,s){var i=!1,o;t.subscribe({next:function(a){o=a,i=!0},error:s,complete:function(){i?n(o):r?n(e.defaultValue):s(new vl)}})})}function Bi(t){return new Z(function(e){ve(t()).subscribe(e)})}var ji={};Zs(ji,{JsonPatchError:()=>J,_areEquals:()=>tn,applyOperation:()=>Wt,applyPatch:()=>ht,applyReducer:()=>ep,deepClone:()=>Jf,getValueByPointer:()=>is,validate:()=>yl,validator:()=>os});var Kf=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)s.hasOwnProperty(i)&&(n[i]=s[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yf=Object.prototype.hasOwnProperty;function rs(t,e){return Yf.call(t,e)}function ns(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var n=[];for(var s in t)rs(t,s)&&n.push(s);return n}function ce(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ss(t){for(var e=0,r=t.length,n;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function Ze(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Qr(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function ts(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(ts(t[e]))return!0}else if(typeof t=="object"){for(var n=ns(t),s=n.length,i=0;i<s;i++)if(ts(t[n[i]]))return!0}}return!1}function _l(t,e){var r=[t];for(var n in e){var s=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof s<"u"&&r.push(n+": "+s)}return r.join(`
`)}var en=function(t){Kf(e,t);function e(r,n,s,i,o){var a=this.constructor,l=t.call(this,_l(r,{name:n,index:s,operation:i,tree:o}))||this;return l.name=n,l.index=s,l.operation=i,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=_l(r,{name:n,index:s,operation:i,tree:o}),l}return e}(Error);var J=en,Jf=ce,Er={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){var n=is(r,this.path);n&&(n=ce(n));var s=Wt(r,{op:"remove",path:this.from}).removed;return Wt(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:n}},copy:function(t,e,r){var n=is(r,this.from);return Wt(r,{op:"add",path:this.path,value:ce(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:tn(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},Qf={add:function(t,e,r){return ss(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Er.move,copy:Er.copy,test:Er.test,_get:Er._get};function is(t,e){if(e=="")return t;var r={op:"_get",path:e};return Wt(t,r),r.value}function Wt(t,e,r,n,s,i){if(r===void 0&&(r=!1),n===void 0&&(n=!0),s===void 0&&(s=!0),i===void 0&&(i=0),r&&(typeof r=="function"?r(e,0,t,e.path):os(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=is(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=tn(t,e.value),o.test===!1)throw new J("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(r)throw new J("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return o}}else{n||(t=ce(t));var a=e.path||"",l=a.split("/"),c=t,u=1,m=l.length,g=void 0,h=void 0,f=void 0;for(typeof r=="function"?f=r:f=os;;){if(h=l[u],h&&h.indexOf("~")!=-1&&(h=Qr(h)),s&&(h=="__proto__"||h=="prototype"&&u>0&&l[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&g===void 0&&(c[h]===void 0?g=l.slice(0,u).join("/"):u==m-1&&(g=e.path),g!==void 0&&f(e,0,t,g)),u++,Array.isArray(c)){if(h==="-")h=c.length;else{if(r&&!ss(h))throw new J("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);ss(h)&&(h=~~h)}if(u>=m){if(r&&e.op==="add"&&h>c.length)throw new J("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);var o=Qf[e.op].call(e,c,h,t);if(o.test===!1)throw new J("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return o}}else if(u>=m){var o=Er[e.op].call(e,c,h,t);if(o.test===!1)throw new J("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return o}if(c=c[h],r&&u<m&&(!c||typeof c!="object"))throw new J("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function ht(t,e,r,n,s){if(n===void 0&&(n=!0),s===void 0&&(s=!0),r&&!Array.isArray(e))throw new J("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=ce(t));for(var i=new Array(e.length),o=0,a=e.length;o<a;o++)i[o]=Wt(t,e[o],r,!0,s,o),t=i[o].newDocument;return i.newDocument=t,i}function ep(t,e,r){var n=Wt(t,e);if(n.test===!1)throw new J("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function os(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new J("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(Er[t.op]){if(typeof t.path!="string")throw new J("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new J('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new J("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new J("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&ts(t.value))throw new J("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var s=t.path.split("/").length,i=n.split("/").length;if(s!==i+1&&s!==i)throw new J("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new J("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},a=yl([o],r);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new J("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new J("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function yl(t,e,r){try{if(!Array.isArray(t))throw new J("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)ht(ce(e),ce(t),r||!0);else{r=r||os;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(s){if(s instanceof J)return s;throw s}}function tn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),s,i,o;if(r&&n){if(i=t.length,i!=e.length)return!1;for(s=i;s--!==0;)if(!tn(t[s],e[s]))return!1;return!0}if(r!=n)return!1;var a=Object.keys(t);if(i=a.length,i!==Object.keys(e).length)return!1;for(s=i;s--!==0;)if(!e.hasOwnProperty(a[s]))return!1;for(s=i;s--!==0;)if(o=a[s],!tn(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var qi={};Zs(qi,{compare:()=>lp,generate:()=>Vi,observe:()=>ap,unobserve:()=>op});var Wi=new WeakMap,tp=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),rp=function(){function t(e,r){this.callback=e,this.observer=r}return t}();function np(t){return Wi.get(t)}function sp(t,e){return t.observers.get(e)}function ip(t,e){t.observers.delete(e.callback)}function op(t,e){e.unobserve()}function ap(t,e){var r=[],n,s=np(t);if(!s)s=new tp(t),Wi.set(t,s);else{var i=sp(s,e);n=i&&i.observer}if(n)return n;if(n={},s.value=ce(t),e){n.callback=e,n.next=null;var o=function(){Vi(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=r,n.object=t,n.unobserve=function(){Vi(n),clearTimeout(n.next),ip(s,n),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},s.observers.set(e,new rp(e,n)),n}function Vi(t,e){e===void 0&&(e=!1);var r=Wi.get(t.object);Zi(r.value,t.object,t.patches,"",e),t.patches.length&&ht(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function Zi(t,e,r,n,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=ns(e),o=ns(t),a=!1,l=!1,c=o.length-1;c>=0;c--){var u=o[c],m=t[u];if(rs(e,u)&&!(e[u]===void 0&&m!==void 0&&Array.isArray(e)===!1)){var g=e[u];typeof m=="object"&&m!=null&&typeof g=="object"&&g!=null&&Array.isArray(m)===Array.isArray(g)?Zi(m,g,r,n+"/"+Ze(u),s):m!==g&&(a=!0,s&&r.push({op:"test",path:n+"/"+Ze(u),value:ce(m)}),r.push({op:"replace",path:n+"/"+Ze(u),value:ce(g)}))}else Array.isArray(t)===Array.isArray(e)?(s&&r.push({op:"test",path:n+"/"+Ze(u),value:ce(m)}),r.push({op:"remove",path:n+"/"+Ze(u)}),l=!0):(s&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}),a=!0)}if(!(!l&&i.length==o.length))for(var c=0;c<i.length;c++){var u=i[c];!rs(t,u)&&e[u]!==void 0&&r.push({op:"add",path:n+"/"+Ze(u),value:ce(e[u])})}}}function lp(t,e,r){r===void 0&&(r=!1);var n=[];return Zi(t,e,n,"",r),n}var Py=Object.assign({},ji,qi,{JsonPatchError:en,deepClone:ce,escapePathComponent:Ze,unescapePathComponent:Qr});function xl(t){return` \r
	`.indexOf(t)>=0}function rn(t){for(var e=["topLevel"],r=0,n,s,i,o=function(R){return e.push(R)},a=function(R){return e[e.length-1]=R},l=function(R){n==null&&(n=r,s=e.length,i=R)},c=function(R){R===i&&(n=void 0,s=void 0,i=void 0)},u=function(){return e.pop()},m=function(){return r--},g=function(R){if("0"<=R&&R<="9"){o("number");return}switch(R){case'"':o("string");return;case"-":o("numberNeedsDigit");return;case"t":o("true");return;case"f":o("false");return;case"n":o("null");return;case"[":o("arrayNeedsValue");return;case"{":o("objectNeedsKey");return}},h=t.length;r<h;r++){var f=t[r];switch(e[e.length-1]){case"topLevel":g(f);break;case"string":switch(f){case'"':u();break;case"\\":l("stringEscape"),o("stringEscaped");break}break;case"stringEscaped":f==="u"?o("stringUnicode"):(c("stringEscape"),u());break;case"stringUnicode":r-t.lastIndexOf("u",r)===4&&(c("stringEscape"),u());break;case"number":f==="."?a("numberNeedsDigit"):f==="e"||f==="E"?a("numberNeedsExponent"):(f<"0"||f>"9")&&(m(),u());break;case"numberNeedsDigit":a("number");break;case"numberNeedsExponent":a(f==="+"||f==="-"?"numberNeedsDigit":"number");break;case"true":case"false":case"null":(f<"a"||f>"z")&&(m(),u());break;case"arrayNeedsValue":f==="]"?u():xl(f)||(c("collectionItem"),a("arrayNeedsComma"),g(f));break;case"arrayNeedsComma":f==="]"?u():f===","&&(l("collectionItem"),a("arrayNeedsValue"));break;case"objectNeedsKey":f==="}"?u():f==='"'&&(l("collectionItem"),a("objectNeedsColon"),o("string"));break;case"objectNeedsColon":f===":"&&a("objectNeedsValue");break;case"objectNeedsValue":xl(f)||(c("collectionItem"),a("objectNeedsComma"),g(f));break;case"objectNeedsComma":f==="}"?u():f===","&&(l("collectionItem"),a("objectNeedsKey"));break}}s!=null&&(e.length=s);for(var v=[n!=null?t.slice(0,n):t],T=function(R){return v.push(R.slice(t.length-t.lastIndexOf(R[0])))},b=e.length-1;b>=0;b--)switch(e[b]){case"string":v.push('"');break;case"numberNeedsDigit":case"numberNeedsExponent":v.push("0");break;case"true":T("true");break;case"false":T("false");break;case"null":T("null");break;case"arrayNeedsValue":case"arrayNeedsComma":v.push("]");break;case"objectNeedsKey":case"objectNeedsColon":case"objectNeedsValue":case"objectNeedsComma":v.push("}");break}return v.join("")}function El(){let t=0,e=0;for(let n=0;n<28;n+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[t,e]}let r=this.buf[this.pos++];if(t|=(r&15)<<28,e=(r&112)>>4,(r&128)==0)return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ls(t,e,r){for(let i=0;i<28;i=i+7){let o=t>>>i,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(r.push(l),!a)return}let n=t>>>28&15|(e&7)<<4,s=e>>3!=0;if(r.push((s?n|128:n)&255),!!s){for(let i=3;i<31;i=i+7){let o=e>>>i,a=!!(o>>>7),l=(a?o|128:o)&255;if(r.push(l),!a)return}r.push(e>>>31&1)}}var as=4294967296;function Xi(t){let e=t[0]==="-";e&&(t=t.slice(1));let r=1e6,n=0,s=0;function i(o,a){let l=Number(t.slice(o,a));s*=r,n=n*r+l,n>=as&&(s=s+(n/as|0),n=n%as)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),e?Sl(n,s):Yi(n,s)}function Tl(t,e){let r=Yi(t,e),n=r.hi&2147483648;n&&(r=Sl(r.lo,r.hi));let s=Ki(r.lo,r.hi);return n?"-"+s:s}function Ki(t,e){if({lo:t,hi:e}=cp(t,e),e<=2097151)return String(as*e+t);let r=t&16777215,n=(t>>>24|e<<8)&16777215,s=e>>16&65535,i=r+n*6777216+s*6710656,o=n+s*8147497,a=s*2,l=1e7;return i>=l&&(o+=Math.floor(i/l),i%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+bl(o)+bl(i)}function cp(t,e){return{lo:t>>>0,hi:e>>>0}}function Yi(t,e){return{lo:t|0,hi:e|0}}function Sl(t,e){return e=~e,t?t=~t+1:e+=1,Yi(t,e)}var bl=t=>{let e=String(t);return"0000000".slice(e.length)+e};function Ji(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let r=0;r<9;r++)e.push(t&127|128),t=t>>7;e.push(1)}}function wl(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let r=5;(t&128)!==0&&r<10;r++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Ue=up();function up(){let t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.BUF_BIGINT_DISABLE!=="1")){let r=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),s=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){let a=typeof o=="bigint"?o:BigInt(o);if(a>n||a<r)throw new Error(`invalid int64: ${o}`);return a},uParse(o){let a=typeof o=="bigint"?o:BigInt(o);if(a>i||a<s)throw new Error(`invalid uint64: ${o}`);return a},enc(o){return t.setBigInt64(0,this.parse(o),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(o){return t.setBigInt64(0,this.uParse(o),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(o,a){return t.setInt32(0,o,!0),t.setInt32(4,a,!0),t.getBigInt64(0,!0)},uDec(o,a){return t.setInt32(0,o,!0),t.setInt32(4,a,!0),t.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),Al(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),kl(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),Al(r),Xi(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),kl(r),Xi(r)},dec(r,n){return Tl(r,n)},uDec(r,n){return Ki(r,n)}}}function Al(t){if(!/^-?[0-9]+$/.test(t))throw new Error("invalid int64: "+t)}function kl(t){if(!/^[0-9]+$/.test(t))throw new Error("invalid uint64: "+t)}var Qi=Symbol.for("@bufbuild/protobuf/text-encoding");function eo(){if(globalThis[Qi]==null){let t=new globalThis.TextEncoder,e=new globalThis.TextDecoder;globalThis[Qi]={encodeUtf8(r){return t.encode(r)},decodeUtf8(r){return e.decode(r)},checkUtf8(r){try{return encodeURIComponent(r),!0}catch{return!1}}}}return globalThis[Qi]}var mt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(mt||(mt={}));var dp=34028234663852886e22,fp=-34028234663852886e22,pp=4294967295,hp=2147483647,mp=-2147483648,H=class{constructor(e=eo().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let r=new Uint8Array(e),n=0;for(let s=0;s<this.chunks.length;s++)r.set(this.chunks[s],n),n+=this.chunks[s].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Il(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return to(e),Ji(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.encodeUtf8(e);return this.uint32(r.byteLength),this.raw(r)}float(e){gp(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){Il(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){to(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return to(e),e=(e<<1^e>>31)>>>0,Ji(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),s=Ue.enc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),s=Ue.uEnc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(r)}int64(e){let r=Ue.enc(e);return ls(r.lo,r.hi,this.buf),this}sint64(e){let r=Ue.enc(e),n=r.hi>>31,s=r.lo<<1^n,i=(r.hi<<1|r.lo>>>31)^n;return ls(s,i,this.buf),this}uint64(e){let r=Ue.uEnc(e);return ls(r.lo,r.hi,this.buf),this}},w=class{constructor(e,r=eo().decodeUtf8){this.decodeUtf8=r,this.varint64=El,this.uint32=wl,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),r=e>>>3,n=e&7;if(r<=0||n<0||n>5)throw new Error("illegal tag: field no "+r+" wire type "+n);return[r,n]}skip(e,r){let n=this.pos;switch(e){case mt.Varint:for(;this.buf[this.pos++]&128;);break;case mt.Bit64:this.pos+=4;case mt.Bit32:this.pos+=4;break;case mt.LengthDelimited:let s=this.uint32();this.pos+=s;break;case mt.StartGroup:for(;;){let[i,o]=this.tag();if(o===mt.EndGroup){if(r!==void 0&&i!==r)throw new Error("invalid end group tag");break}this.skip(o,i)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ue.dec(...this.varint64())}uint64(){return Ue.uDec(...this.varint64())}sint64(){let[e,r]=this.varint64(),n=-(e&1);return e=(e>>>1|(r&1)<<31)^n,r=r>>>1^n,Ue.dec(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ue.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ue.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.decodeUtf8(this.bytes())}};function to(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid int32: "+typeof t);if(!Number.isInteger(t)||t>hp||t<mp)throw new Error("invalid int32: "+t)}function Il(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid uint32: "+typeof t);if(!Number.isInteger(t)||t>pp||t<0)throw new Error("invalid uint32: "+t)}function gp(t){if(typeof t=="string"){let e=t;if(t=Number(t),Number.isNaN(t)&&e!=="NaN")throw new Error("invalid float32: "+e)}else if(typeof t!="number")throw new Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>dp||t<fp))throw new Error("invalid float32: "+t)}function ro(){return{fields:{}}}var nn={encode(t,e=new H){return Object.entries(t.fields).forEach(([r,n])=>{n!==void 0&&io.encode({key:r,value:n},e.uint32(10).fork()).join()}),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=ro();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;let o=io.decode(r,r.uint32());o.value!==void 0&&(s.fields[o.key]=o.value);continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return nn.fromPartial(t??{})},fromPartial(t){var e;let r=ro();return r.fields=Object.entries((e=t.fields)!=null?e:{}).reduce((n,[s,i])=>(i!==void 0&&(n[s]=i),n),{}),r},wrap(t){let e=ro();if(t!==void 0)for(let r of Object.keys(t))e.fields[r]=t[r];return e},unwrap(t){let e={};if(t.fields)for(let r of Object.keys(t.fields))e[r]=t.fields[r];return e}};function Cl(){return{key:"",value:void 0}}var io={encode(t,e=new H){return t.key!==""&&e.uint32(10).string(t.key),t.value!==void 0&&G.encode(G.wrap(t.value),e.uint32(18).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Cl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.key=r.string();continue}case 2:{if(i!==18)break;s.value=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return io.fromPartial(t??{})},fromPartial(t){var e,r;let n=Cl();return n.key=(e=t.key)!=null?e:"",n.value=(r=t.value)!=null?r:void 0,n}};function no(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}var G={encode(t,e=new H){return t.nullValue!==void 0&&e.uint32(8).int32(t.nullValue),t.numberValue!==void 0&&e.uint32(17).double(t.numberValue),t.stringValue!==void 0&&e.uint32(26).string(t.stringValue),t.boolValue!==void 0&&e.uint32(32).bool(t.boolValue),t.structValue!==void 0&&nn.encode(nn.wrap(t.structValue),e.uint32(42).fork()).join(),t.listValue!==void 0&&sn.encode(sn.wrap(t.listValue),e.uint32(50).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=no();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==8)break;s.nullValue=r.int32();continue}case 2:{if(i!==17)break;s.numberValue=r.double();continue}case 3:{if(i!==26)break;s.stringValue=r.string();continue}case 4:{if(i!==32)break;s.boolValue=r.bool();continue}case 5:{if(i!==42)break;s.structValue=nn.unwrap(nn.decode(r,r.uint32()));continue}case 6:{if(i!==50)break;s.listValue=sn.unwrap(sn.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return G.fromPartial(t??{})},fromPartial(t){var e,r,n,s,i,o;let a=no();return a.nullValue=(e=t.nullValue)!=null?e:void 0,a.numberValue=(r=t.numberValue)!=null?r:void 0,a.stringValue=(n=t.stringValue)!=null?n:void 0,a.boolValue=(s=t.boolValue)!=null?s:void 0,a.structValue=(i=t.structValue)!=null?i:void 0,a.listValue=(o=t.listValue)!=null?o:void 0,a},wrap(t){let e=no();if(t===null)e.nullValue=0;else if(typeof t=="boolean")e.boolValue=t;else if(typeof t=="number")e.numberValue=t;else if(typeof t=="string")e.stringValue=t;else if(globalThis.Array.isArray(t))e.listValue=t;else if(typeof t=="object")e.structValue=t;else if(typeof t<"u")throw new globalThis.Error("Unsupported any value type: "+typeof t);return e},unwrap(t){if(t.stringValue!==void 0)return t.stringValue;if(t?.numberValue!==void 0)return t.numberValue;if(t?.boolValue!==void 0)return t.boolValue;if(t?.structValue!==void 0)return t.structValue;if(t?.listValue!==void 0)return t.listValue;if(t?.nullValue!==void 0)return null}};function so(){return{values:[]}}var sn={encode(t,e=new H){for(let r of t.values)G.encode(G.wrap(r),e.uint32(10).fork()).join();return e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=so();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.values.push(G.unwrap(G.decode(r,r.uint32())));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return sn.fromPartial(t??{})},fromPartial(t){var e;let r=so();return r.values=((e=t.values)==null?void 0:e.map(n=>n))||[],r},wrap(t){let e=so();return e.values=t??[],e},unwrap(t){return t?.hasOwnProperty("values")&&globalThis.Array.isArray(t.values)?t.values:t}},ec=(t=>(t[t.ADD=0]="ADD",t[t.REMOVE=1]="REMOVE",t[t.REPLACE=2]="REPLACE",t[t.MOVE=3]="MOVE",t[t.COPY=4]="COPY",t[t.TEST=5]="TEST",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(ec||{});function Nl(){return{op:0,path:"",from:void 0,value:void 0}}var cs={encode(t,e=new H){return t.op!==0&&e.uint32(8).int32(t.op),t.path!==""&&e.uint32(18).string(t.path),t.from!==void 0&&e.uint32(26).string(t.from),t.value!==void 0&&G.encode(G.wrap(t.value),e.uint32(34).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Nl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==8)break;s.op=r.int32();continue}case 2:{if(i!==18)break;s.path=r.string();continue}case 3:{if(i!==26)break;s.from=r.string();continue}case 4:{if(i!==34)break;s.value=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return cs.fromPartial(t??{})},fromPartial(t){var e,r,n,s;let i=Nl();return i.op=(e=t.op)!=null?e:0,i.path=(r=t.path)!=null?r:"",i.from=(n=t.from)!=null?n:void 0,i.value=(s=t.value)!=null?s:void 0,i}};function Ol(){return{id:"",type:"",function:void 0}}var us={encode(t,e=new H){return t.id!==""&&e.uint32(10).string(t.id),t.type!==""&&e.uint32(18).string(t.type),t.function!==void 0&&ds.encode(t.function,e.uint32(26).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Ol();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.id=r.string();continue}case 2:{if(i!==18)break;s.type=r.string();continue}case 3:{if(i!==26)break;s.function=ds.decode(r,r.uint32());continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return us.fromPartial(t??{})},fromPartial(t){var e,r;let n=Ol();return n.id=(e=t.id)!=null?e:"",n.type=(r=t.type)!=null?r:"",n.function=t.function!==void 0&&t.function!==null?ds.fromPartial(t.function):void 0,n}};function Rl(){return{name:"",arguments:""}}var ds={encode(t,e=new H){return t.name!==""&&e.uint32(10).string(t.name),t.arguments!==""&&e.uint32(18).string(t.arguments),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Rl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.name=r.string();continue}case 2:{if(i!==18)break;s.arguments=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ds.fromPartial(t??{})},fromPartial(t){var e,r;let n=Rl();return n.name=(e=t.name)!=null?e:"",n.arguments=(r=t.arguments)!=null?r:"",n}};function Ml(){return{id:"",role:"",content:void 0,name:void 0,toolCalls:[],toolCallId:void 0}}var fs={encode(t,e=new H){t.id!==""&&e.uint32(10).string(t.id),t.role!==""&&e.uint32(18).string(t.role),t.content!==void 0&&e.uint32(26).string(t.content),t.name!==void 0&&e.uint32(34).string(t.name);for(let r of t.toolCalls)us.encode(r,e.uint32(42).fork()).join();return t.toolCallId!==void 0&&e.uint32(50).string(t.toolCallId),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Ml();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.id=r.string();continue}case 2:{if(i!==18)break;s.role=r.string();continue}case 3:{if(i!==26)break;s.content=r.string();continue}case 4:{if(i!==34)break;s.name=r.string();continue}case 5:{if(i!==42)break;s.toolCalls.push(us.decode(r,r.uint32()));continue}case 6:{if(i!==50)break;s.toolCallId=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return fs.fromPartial(t??{})},fromPartial(t){var e,r,n,s,i,o;let a=Ml();return a.id=(e=t.id)!=null?e:"",a.role=(r=t.role)!=null?r:"",a.content=(n=t.content)!=null?n:void 0,a.name=(s=t.name)!=null?s:void 0,a.toolCalls=((i=t.toolCalls)==null?void 0:i.map(l=>us.fromPartial(l)))||[],a.toolCallId=(o=t.toolCallId)!=null?o:void 0,a}},tc=(t=>(t[t.TEXT_MESSAGE_START=0]="TEXT_MESSAGE_START",t[t.TEXT_MESSAGE_CONTENT=1]="TEXT_MESSAGE_CONTENT",t[t.TEXT_MESSAGE_END=2]="TEXT_MESSAGE_END",t[t.TOOL_CALL_START=3]="TOOL_CALL_START",t[t.TOOL_CALL_ARGS=4]="TOOL_CALL_ARGS",t[t.TOOL_CALL_END=5]="TOOL_CALL_END",t[t.STATE_SNAPSHOT=6]="STATE_SNAPSHOT",t[t.STATE_DELTA=7]="STATE_DELTA",t[t.MESSAGES_SNAPSHOT=8]="MESSAGES_SNAPSHOT",t[t.RAW=9]="RAW",t[t.CUSTOM=10]="CUSTOM",t[t.RUN_STARTED=11]="RUN_STARTED",t[t.RUN_FINISHED=12]="RUN_FINISHED",t[t.RUN_ERROR=13]="RUN_ERROR",t[t.STEP_STARTED=14]="STEP_STARTED",t[t.STEP_FINISHED=15]="STEP_FINISHED",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(tc||{});function Ll(){return{type:0,timestamp:void 0,rawEvent:void 0}}var C={encode(t,e=new H){return t.type!==0&&e.uint32(8).int32(t.type),t.timestamp!==void 0&&e.uint32(16).int64(t.timestamp),t.rawEvent!==void 0&&G.encode(G.wrap(t.rawEvent),e.uint32(26).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Ll();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==8)break;s.type=r.int32();continue}case 2:{if(i!==16)break;s.timestamp=vp(r.int64());continue}case 3:{if(i!==26)break;s.rawEvent=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return C.fromPartial(t??{})},fromPartial(t){var e,r,n;let s=Ll();return s.type=(e=t.type)!=null?e:0,s.timestamp=(r=t.timestamp)!=null?r:void 0,s.rawEvent=(n=t.rawEvent)!=null?n:void 0,s}};function Pl(){return{baseEvent:void 0,messageId:"",role:void 0}}var ps={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.messageId!==""&&e.uint32(18).string(t.messageId),t.role!==void 0&&e.uint32(26).string(t.role),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Pl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.messageId=r.string();continue}case 3:{if(i!==26)break;s.role=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ps.fromPartial(t??{})},fromPartial(t){var e,r;let n=Pl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.messageId=(e=t.messageId)!=null?e:"",n.role=(r=t.role)!=null?r:void 0,n}};function Dl(){return{baseEvent:void 0,messageId:"",delta:""}}var hs={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.messageId!==""&&e.uint32(18).string(t.messageId),t.delta!==""&&e.uint32(26).string(t.delta),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Dl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.messageId=r.string();continue}case 3:{if(i!==26)break;s.delta=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return hs.fromPartial(t??{})},fromPartial(t){var e,r;let n=Dl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.messageId=(e=t.messageId)!=null?e:"",n.delta=(r=t.delta)!=null?r:"",n}};function $l(){return{baseEvent:void 0,messageId:""}}var ms={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.messageId!==""&&e.uint32(18).string(t.messageId),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=$l();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.messageId=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ms.fromPartial(t??{})},fromPartial(t){var e;let r=$l();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.messageId=(e=t.messageId)!=null?e:"",r}};function Ul(){return{baseEvent:void 0,toolCallId:"",toolCallName:"",parentMessageId:void 0}}var gs={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.toolCallId!==""&&e.uint32(18).string(t.toolCallId),t.toolCallName!==""&&e.uint32(26).string(t.toolCallName),t.parentMessageId!==void 0&&e.uint32(34).string(t.parentMessageId),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Ul();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.toolCallId=r.string();continue}case 3:{if(i!==26)break;s.toolCallName=r.string();continue}case 4:{if(i!==34)break;s.parentMessageId=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return gs.fromPartial(t??{})},fromPartial(t){var e,r,n;let s=Ul();return s.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,s.toolCallId=(e=t.toolCallId)!=null?e:"",s.toolCallName=(r=t.toolCallName)!=null?r:"",s.parentMessageId=(n=t.parentMessageId)!=null?n:void 0,s}};function Fl(){return{baseEvent:void 0,toolCallId:"",delta:""}}var vs={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.toolCallId!==""&&e.uint32(18).string(t.toolCallId),t.delta!==""&&e.uint32(26).string(t.delta),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Fl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.toolCallId=r.string();continue}case 3:{if(i!==26)break;s.delta=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return vs.fromPartial(t??{})},fromPartial(t){var e,r;let n=Fl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.toolCallId=(e=t.toolCallId)!=null?e:"",n.delta=(r=t.delta)!=null?r:"",n}};function Hl(){return{baseEvent:void 0,toolCallId:""}}var _s={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.toolCallId!==""&&e.uint32(18).string(t.toolCallId),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Hl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.toolCallId=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return _s.fromPartial(t??{})},fromPartial(t){var e;let r=Hl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.toolCallId=(e=t.toolCallId)!=null?e:"",r}};function Gl(){return{baseEvent:void 0,snapshot:void 0}}var ys={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.snapshot!==void 0&&G.encode(G.wrap(t.snapshot),e.uint32(18).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Gl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.snapshot=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ys.fromPartial(t??{})},fromPartial(t){var e;let r=Gl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.snapshot=(e=t.snapshot)!=null?e:void 0,r}};function zl(){return{baseEvent:void 0,delta:[]}}var xs={encode(t,e=new H){t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join();for(let r of t.delta)cs.encode(r,e.uint32(18).fork()).join();return e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=zl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.delta.push(cs.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return xs.fromPartial(t??{})},fromPartial(t){var e;let r=zl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.delta=((e=t.delta)==null?void 0:e.map(n=>cs.fromPartial(n)))||[],r}};function Bl(){return{baseEvent:void 0,messages:[]}}var bs={encode(t,e=new H){t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join();for(let r of t.messages)fs.encode(r,e.uint32(18).fork()).join();return e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Bl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.messages.push(fs.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return bs.fromPartial(t??{})},fromPartial(t){var e;let r=Bl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.messages=((e=t.messages)==null?void 0:e.map(n=>fs.fromPartial(n)))||[],r}};function jl(){return{baseEvent:void 0,event:void 0,source:void 0}}var Es={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.event!==void 0&&G.encode(G.wrap(t.event),e.uint32(18).fork()).join(),t.source!==void 0&&e.uint32(26).string(t.source),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=jl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.event=G.unwrap(G.decode(r,r.uint32()));continue}case 3:{if(i!==26)break;s.source=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Es.fromPartial(t??{})},fromPartial(t){var e,r;let n=jl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.event=(e=t.event)!=null?e:void 0,n.source=(r=t.source)!=null?r:void 0,n}};function Vl(){return{baseEvent:void 0,name:"",value:void 0}}var Ts={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.name!==""&&e.uint32(18).string(t.name),t.value!==void 0&&G.encode(G.wrap(t.value),e.uint32(26).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Vl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.name=r.string();continue}case 3:{if(i!==26)break;s.value=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Ts.fromPartial(t??{})},fromPartial(t){var e,r;let n=Vl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.name=(e=t.name)!=null?e:"",n.value=(r=t.value)!=null?r:void 0,n}};function Wl(){return{baseEvent:void 0,threadId:"",runId:""}}var Ss={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.threadId!==""&&e.uint32(18).string(t.threadId),t.runId!==""&&e.uint32(26).string(t.runId),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Wl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.threadId=r.string();continue}case 3:{if(i!==26)break;s.runId=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Ss.fromPartial(t??{})},fromPartial(t){var e,r;let n=Wl();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.threadId=(e=t.threadId)!=null?e:"",n.runId=(r=t.runId)!=null?r:"",n}};function Zl(){return{baseEvent:void 0,threadId:"",runId:"",result:void 0}}var ws={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.threadId!==""&&e.uint32(18).string(t.threadId),t.runId!==""&&e.uint32(26).string(t.runId),t.result!==void 0&&G.encode(G.wrap(t.result),e.uint32(34).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Zl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.threadId=r.string();continue}case 3:{if(i!==26)break;s.runId=r.string();continue}case 4:{if(i!==34)break;s.result=G.unwrap(G.decode(r,r.uint32()));continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ws.fromPartial(t??{})},fromPartial(t){var e,r,n;let s=Zl();return s.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,s.threadId=(e=t.threadId)!=null?e:"",s.runId=(r=t.runId)!=null?r:"",s.result=(n=t.result)!=null?n:void 0,s}};function ql(){return{baseEvent:void 0,code:void 0,message:""}}var As={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.code!==void 0&&e.uint32(18).string(t.code),t.message!==""&&e.uint32(26).string(t.message),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=ql();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.code=r.string();continue}case 3:{if(i!==26)break;s.message=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return As.fromPartial(t??{})},fromPartial(t){var e,r;let n=ql();return n.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,n.code=(e=t.code)!=null?e:void 0,n.message=(r=t.message)!=null?r:"",n}};function Xl(){return{baseEvent:void 0,stepName:""}}var ks={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.stepName!==""&&e.uint32(18).string(t.stepName),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Xl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.stepName=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return ks.fromPartial(t??{})},fromPartial(t){var e;let r=Xl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.stepName=(e=t.stepName)!=null?e:"",r}};function Kl(){return{baseEvent:void 0,stepName:""}}var Is={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.stepName!==""&&e.uint32(18).string(t.stepName),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Kl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.stepName=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Is.fromPartial(t??{})},fromPartial(t){var e;let r=Kl();return r.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,r.stepName=(e=t.stepName)!=null?e:"",r}};function Yl(){return{baseEvent:void 0,messageId:void 0,role:void 0,delta:void 0}}var Cs={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.messageId!==void 0&&e.uint32(18).string(t.messageId),t.role!==void 0&&e.uint32(26).string(t.role),t.delta!==void 0&&e.uint32(34).string(t.delta),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Yl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.messageId=r.string();continue}case 3:{if(i!==26)break;s.role=r.string();continue}case 4:{if(i!==34)break;s.delta=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Cs.fromPartial(t??{})},fromPartial(t){var e,r,n;let s=Yl();return s.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,s.messageId=(e=t.messageId)!=null?e:void 0,s.role=(r=t.role)!=null?r:void 0,s.delta=(n=t.delta)!=null?n:void 0,s}};function Jl(){return{baseEvent:void 0,toolCallId:void 0,toolCallName:void 0,parentMessageId:void 0,delta:void 0}}var Ns={encode(t,e=new H){return t.baseEvent!==void 0&&C.encode(t.baseEvent,e.uint32(10).fork()).join(),t.toolCallId!==void 0&&e.uint32(18).string(t.toolCallId),t.toolCallName!==void 0&&e.uint32(26).string(t.toolCallName),t.parentMessageId!==void 0&&e.uint32(34).string(t.parentMessageId),t.delta!==void 0&&e.uint32(42).string(t.delta),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Jl();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.baseEvent=C.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.toolCallId=r.string();continue}case 3:{if(i!==26)break;s.toolCallName=r.string();continue}case 4:{if(i!==34)break;s.parentMessageId=r.string();continue}case 5:{if(i!==42)break;s.delta=r.string();continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return Ns.fromPartial(t??{})},fromPartial(t){var e,r,n,s;let i=Jl();return i.baseEvent=t.baseEvent!==void 0&&t.baseEvent!==null?C.fromPartial(t.baseEvent):void 0,i.toolCallId=(e=t.toolCallId)!=null?e:void 0,i.toolCallName=(r=t.toolCallName)!=null?r:void 0,i.parentMessageId=(n=t.parentMessageId)!=null?n:void 0,i.delta=(s=t.delta)!=null?s:void 0,i}};function Ql(){return{textMessageStart:void 0,textMessageContent:void 0,textMessageEnd:void 0,toolCallStart:void 0,toolCallArgs:void 0,toolCallEnd:void 0,stateSnapshot:void 0,stateDelta:void 0,messagesSnapshot:void 0,raw:void 0,custom:void 0,runStarted:void 0,runFinished:void 0,runError:void 0,stepStarted:void 0,stepFinished:void 0,textMessageChunk:void 0,toolCallChunk:void 0}}var rc={encode(t,e=new H){return t.textMessageStart!==void 0&&ps.encode(t.textMessageStart,e.uint32(10).fork()).join(),t.textMessageContent!==void 0&&hs.encode(t.textMessageContent,e.uint32(18).fork()).join(),t.textMessageEnd!==void 0&&ms.encode(t.textMessageEnd,e.uint32(26).fork()).join(),t.toolCallStart!==void 0&&gs.encode(t.toolCallStart,e.uint32(34).fork()).join(),t.toolCallArgs!==void 0&&vs.encode(t.toolCallArgs,e.uint32(42).fork()).join(),t.toolCallEnd!==void 0&&_s.encode(t.toolCallEnd,e.uint32(50).fork()).join(),t.stateSnapshot!==void 0&&ys.encode(t.stateSnapshot,e.uint32(58).fork()).join(),t.stateDelta!==void 0&&xs.encode(t.stateDelta,e.uint32(66).fork()).join(),t.messagesSnapshot!==void 0&&bs.encode(t.messagesSnapshot,e.uint32(74).fork()).join(),t.raw!==void 0&&Es.encode(t.raw,e.uint32(82).fork()).join(),t.custom!==void 0&&Ts.encode(t.custom,e.uint32(90).fork()).join(),t.runStarted!==void 0&&Ss.encode(t.runStarted,e.uint32(98).fork()).join(),t.runFinished!==void 0&&ws.encode(t.runFinished,e.uint32(106).fork()).join(),t.runError!==void 0&&As.encode(t.runError,e.uint32(114).fork()).join(),t.stepStarted!==void 0&&ks.encode(t.stepStarted,e.uint32(122).fork()).join(),t.stepFinished!==void 0&&Is.encode(t.stepFinished,e.uint32(130).fork()).join(),t.textMessageChunk!==void 0&&Cs.encode(t.textMessageChunk,e.uint32(138).fork()).join(),t.toolCallChunk!==void 0&&Ns.encode(t.toolCallChunk,e.uint32(146).fork()).join(),e},decode(t,e){let r=t instanceof w?t:new w(t),n=e===void 0?r.len:r.pos+e,s=Ql();for(;r.pos<n;){let i=r.uint32();switch(i>>>3){case 1:{if(i!==10)break;s.textMessageStart=ps.decode(r,r.uint32());continue}case 2:{if(i!==18)break;s.textMessageContent=hs.decode(r,r.uint32());continue}case 3:{if(i!==26)break;s.textMessageEnd=ms.decode(r,r.uint32());continue}case 4:{if(i!==34)break;s.toolCallStart=gs.decode(r,r.uint32());continue}case 5:{if(i!==42)break;s.toolCallArgs=vs.decode(r,r.uint32());continue}case 6:{if(i!==50)break;s.toolCallEnd=_s.decode(r,r.uint32());continue}case 7:{if(i!==58)break;s.stateSnapshot=ys.decode(r,r.uint32());continue}case 8:{if(i!==66)break;s.stateDelta=xs.decode(r,r.uint32());continue}case 9:{if(i!==74)break;s.messagesSnapshot=bs.decode(r,r.uint32());continue}case 10:{if(i!==82)break;s.raw=Es.decode(r,r.uint32());continue}case 11:{if(i!==90)break;s.custom=Ts.decode(r,r.uint32());continue}case 12:{if(i!==98)break;s.runStarted=Ss.decode(r,r.uint32());continue}case 13:{if(i!==106)break;s.runFinished=ws.decode(r,r.uint32());continue}case 14:{if(i!==114)break;s.runError=As.decode(r,r.uint32());continue}case 15:{if(i!==122)break;s.stepStarted=ks.decode(r,r.uint32());continue}case 16:{if(i!==130)break;s.stepFinished=Is.decode(r,r.uint32());continue}case 17:{if(i!==138)break;s.textMessageChunk=Cs.decode(r,r.uint32());continue}case 18:{if(i!==146)break;s.toolCallChunk=Ns.decode(r,r.uint32());continue}}if((i&7)===4||i===0)break;r.skip(i&7)}return s},create(t){return rc.fromPartial(t??{})},fromPartial(t){let e=Ql();return e.textMessageStart=t.textMessageStart!==void 0&&t.textMessageStart!==null?ps.fromPartial(t.textMessageStart):void 0,e.textMessageContent=t.textMessageContent!==void 0&&t.textMessageContent!==null?hs.fromPartial(t.textMessageContent):void 0,e.textMessageEnd=t.textMessageEnd!==void 0&&t.textMessageEnd!==null?ms.fromPartial(t.textMessageEnd):void 0,e.toolCallStart=t.toolCallStart!==void 0&&t.toolCallStart!==null?gs.fromPartial(t.toolCallStart):void 0,e.toolCallArgs=t.toolCallArgs!==void 0&&t.toolCallArgs!==null?vs.fromPartial(t.toolCallArgs):void 0,e.toolCallEnd=t.toolCallEnd!==void 0&&t.toolCallEnd!==null?_s.fromPartial(t.toolCallEnd):void 0,e.stateSnapshot=t.stateSnapshot!==void 0&&t.stateSnapshot!==null?ys.fromPartial(t.stateSnapshot):void 0,e.stateDelta=t.stateDelta!==void 0&&t.stateDelta!==null?xs.fromPartial(t.stateDelta):void 0,e.messagesSnapshot=t.messagesSnapshot!==void 0&&t.messagesSnapshot!==null?bs.fromPartial(t.messagesSnapshot):void 0,e.raw=t.raw!==void 0&&t.raw!==null?Es.fromPartial(t.raw):void 0,e.custom=t.custom!==void 0&&t.custom!==null?Ts.fromPartial(t.custom):void 0,e.runStarted=t.runStarted!==void 0&&t.runStarted!==null?Ss.fromPartial(t.runStarted):void 0,e.runFinished=t.runFinished!==void 0&&t.runFinished!==null?ws.fromPartial(t.runFinished):void 0,e.runError=t.runError!==void 0&&t.runError!==null?As.fromPartial(t.runError):void 0,e.stepStarted=t.stepStarted!==void 0&&t.stepStarted!==null?ks.fromPartial(t.stepStarted):void 0,e.stepFinished=t.stepFinished!==void 0&&t.stepFinished!==null?Is.fromPartial(t.stepFinished):void 0,e.textMessageChunk=t.textMessageChunk!==void 0&&t.textMessageChunk!==null?Cs.fromPartial(t.textMessageChunk):void 0,e.toolCallChunk=t.toolCallChunk!==void 0&&t.toolCallChunk!==null?Ns.fromPartial(t.toolCallChunk):void 0,e}};function vp(t){let e=globalThis.Number(t.toString());if(e>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(e<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return e}function nc(t){var e;let r=rc.decode(t),n=Object.values(r).find(s=>s!==void 0);if(!n)throw new Error("Invalid event");if(n.type=tc[n.baseEvent.type],n.timestamp=n.baseEvent.timestamp,n.rawEvent=n.baseEvent.rawEvent,n.type===_.MESSAGES_SNAPSHOT)for(let s of n.messages){let i=s;((e=i.toolCalls)==null?void 0:e.length)===0&&(i.toolCalls=void 0)}if(n.type===_.STATE_DELTA)for(let s of n.delta)s.op=ec[s.op].toLowerCase(),Object.keys(s).forEach(i=>{s[i]===void 0&&delete s[i]});return Object.keys(n).forEach(s=>{n[s]===void 0&&delete n[s]}),Pn.parse(n)}var sc="application/vnd.ag-ui.event+proto";var ue=[];for(let t=0;t<256;++t)ue.push((t+256).toString(16).slice(1));function oc(t,e=0){return(ue[t[e+0]]+ue[t[e+1]]+ue[t[e+2]]+ue[t[e+3]]+"-"+ue[t[e+4]]+ue[t[e+5]]+"-"+ue[t[e+6]]+ue[t[e+7]]+"-"+ue[t[e+8]]+ue[t[e+9]]+"-"+ue[t[e+10]]+ue[t[e+11]]+ue[t[e+12]]+ue[t[e+13]]+ue[t[e+14]]+ue[t[e+15]]).toLowerCase()}var oo,_p=new Uint8Array(16);function ao(){if(!oo){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");oo=crypto.getRandomValues.bind(crypto)}return oo(_p)}var yp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lo={randomUUID:yp};function xp(t,e,r){if(lo.randomUUID&&!e&&!t)return lo.randomUUID();t=t||{};let n=t.random??t.rng?.()??ao();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[r+s]=n[s];return e}return oc(n)}var Tr=xp;var bp=Object.defineProperty,Ep=Object.defineProperties,Tp=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,Sp=Object.prototype.hasOwnProperty,wp=Object.prototype.propertyIsEnumerable,lc=(t,e,r)=>e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fe=(t,e)=>{for(var r in e||(e={}))Sp.call(e,r)&&lc(t,r,e[r]);if(ac)for(var r of ac(e))wp.call(e,r)&&lc(t,r,e[r]);return t},co=(t,e)=>Ep(t,Tp(e)),de=t=>{if(typeof structuredClone=="function")return structuredClone(t);try{return JSON.parse(JSON.stringify(t))}catch{return Fe({},t)}};async function ee(t,e,r,n){let s=e,i=r,o;for(let a of t)try{let l=await n(a,de(s),de(i));if(l===void 0)continue;if(l.messages!==void 0&&(s=l.messages),l.state!==void 0&&(i=l.state),o=l.stopPropagation,o===!0)break}catch(l){process.env.JEST_WORKER_ID!==void 0||console.error("Subscriber error:",l);continue}return Fe(Fe(Fe({},JSON.stringify(s)!==JSON.stringify(e)?{messages:s}:{}),JSON.stringify(i)!==JSON.stringify(r)?{state:i}:{}),o!==void 0?{stopPropagation:o}:{})}var Ap=(t,e,r,n)=>{let s=de(t.messages),i=de(t.state),o={},a=c=>{c.messages!==void 0&&(s=c.messages,o.messages=c.messages),c.state!==void 0&&(i=c.state,o.state=c.state)},l=()=>{let c=de(o);return o={},c.messages!==void 0||c.state!==void 0?X(c):Ui};return e.pipe(Di(async c=>{var u;let m=await ee(n,s,i,(h,f,v)=>{var T;return(T=h.onEvent)==null?void 0:T.call(h,{event:c,agent:r,input:t,messages:f,state:v})});if(a(m),m.stopPropagation===!0)return l();switch(c.type){case _.TEXT_MESSAGE_START:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onTextMessageStartEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{messageId:f,role:v}=c,T={id:f,role:v,content:""};s.push(T),a({messages:s})}return l()}case _.TEXT_MESSAGE_CONTENT:{let h=await ee(n,s,i,(f,v,T)=>{var b,R;return(R=f.onTextMessageContentEvent)==null?void 0:R.call(f,{event:c,messages:v,state:T,agent:r,input:t,textMessageBuffer:(b=v[v.length-1].content)!=null?b:""})});if(a(h),h.stopPropagation!==!0){let{delta:f}=c,v=s[s.length-1];v.content=v.content+f,a({messages:s})}return l()}case _.TEXT_MESSAGE_END:{let h=await ee(n,s,i,(f,v,T)=>{var b,R;return(R=f.onTextMessageEndEvent)==null?void 0:R.call(f,{event:c,messages:v,state:T,agent:r,input:t,textMessageBuffer:(b=v[v.length-1].content)!=null?b:""})});return a(h),await Promise.all(n.map(f=>{var v;(v=f.onNewMessage)==null||v.call(f,{message:s[s.length-1],messages:s,state:i,agent:r,input:t})})),l()}case _.TOOL_CALL_START:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onToolCallStartEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{toolCallId:f,toolCallName:v,parentMessageId:T}=c,b;T&&s.length>0&&s[s.length-1].id===T?b=s[s.length-1]:(b={id:T||f,role:"assistant",toolCalls:[]},s.push(b)),(u=b.toolCalls)!=null||(b.toolCalls=[]),b.toolCalls.push({id:f,type:"function",function:{name:v,arguments:""}}),a({messages:s})}return l()}case _.TOOL_CALL_ARGS:{let h=await ee(n,s,i,(f,v,T)=>{var b,R,fe;let F=(R=(b=v[v.length-1])==null?void 0:b.toolCalls)!=null?R:[],Te=F.length>0?F[F.length-1].function.arguments:"",gt=F.length>0?F[F.length-1].function.name:"",vt={};try{vt=rn(Te)}catch{}return(fe=f.onToolCallArgsEvent)==null?void 0:fe.call(f,{event:c,messages:v,state:T,agent:r,input:t,toolCallBuffer:Te,toolCallName:gt,partialToolCallArgs:vt})});if(a(h),h.stopPropagation!==!0){let{delta:f}=c,v=s[s.length-1],T=v.toolCalls[v.toolCalls.length-1];T.function.arguments+=f,a({messages:s})}return l()}case _.TOOL_CALL_END:{let h=await ee(n,s,i,(f,v,T)=>{var b,R,fe;let F=(R=(b=v[v.length-1])==null?void 0:b.toolCalls)!=null?R:[],Te=F.length>0?F[F.length-1].function.arguments:"",gt=F.length>0?F[F.length-1].function.name:"",vt={};try{vt=JSON.parse(Te)}catch{}return(fe=f.onToolCallEndEvent)==null?void 0:fe.call(f,{event:c,messages:v,state:T,agent:r,input:t,toolCallName:gt,toolCallArgs:vt})});return a(h),await Promise.all(n.map(f=>{var v;(v=f.onNewToolCall)==null||v.call(f,{toolCall:s[s.length-1].toolCalls[s[s.length-1].toolCalls.length-1],messages:s,state:i,agent:r,input:t})})),l()}case _.TOOL_CALL_RESULT:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onToolCallResultEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{messageId:f,toolCallId:v,content:T,role:b}=c,R={id:f,toolCallId:v,role:b||"tool",content:T};s.push(R),await Promise.all(n.map(fe=>{var F;(F=fe.onNewMessage)==null||F.call(fe,{message:R,messages:s,state:i,agent:r,input:t})})),a({messages:s})}return l()}case _.STATE_SNAPSHOT:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onStateSnapshotEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{snapshot:f}=c;i=f,a({state:i})}return l()}case _.STATE_DELTA:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onStateDeltaEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{delta:f}=c;try{i=ht(i,f,!0,!1).newDocument,a({state:i})}catch(v){let T=v instanceof Error?v.message:String(v);console.warn(`Failed to apply state patch:
Current state: ${JSON.stringify(i,null,2)}
Patch operations: ${JSON.stringify(f,null,2)}
Error: ${T}`)}}return l()}case _.MESSAGES_SNAPSHOT:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onMessagesSnapshotEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});if(a(h),h.stopPropagation!==!0){let{messages:f}=c;s=f,a({messages:s})}return l()}case _.RAW:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onRawEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.CUSTOM:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onCustomEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.RUN_STARTED:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onRunStartedEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.RUN_FINISHED:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onRunFinishedEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t,result:c.result})});return a(h),l()}case _.RUN_ERROR:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onRunErrorEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.STEP_STARTED:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onStepStartedEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.STEP_FINISHED:{let h=await ee(n,s,i,(f,v,T)=>{var b;return(b=f.onStepFinishedEvent)==null?void 0:b.call(f,{event:c,messages:v,state:T,agent:r,input:t})});return a(h),l()}case _.TEXT_MESSAGE_CHUNK:throw new Error("TEXT_MESSAGE_CHUNK must be tranformed before being applied");case _.TOOL_CALL_CHUNK:throw new Error("TOOL_CALL_CHUNK must be tranformed before being applied");case _.THINKING_START:return l();case _.THINKING_END:return l();case _.THINKING_TEXT_MESSAGE_START:return l();case _.THINKING_TEXT_MESSAGE_CONTENT:return l();case _.THINKING_TEXT_MESSAGE_END:return l()}let g=c.type;return l()}),Pi(),n.length>0?$i({}):c=>c)},cc=t=>e=>{let r,n,s=!1,i=!1,o=!1,a=new Map,l=!1,c=!1;return e.pipe(ke(u=>{let m=u.type;if(t&&console.debug("[VERIFY]:",JSON.stringify(u)),i)return j(()=>new W(`Cannot send event type '${m}': The run has already errored with 'RUN_ERROR'. No further events can be sent.`));if(s&&m!==_.RUN_ERROR)return j(()=>new W(`Cannot send event type '${m}': The run has already finished with 'RUN_FINISHED'. Start a new run with 'RUN_STARTED'.`));if(r!==void 0&&![_.TEXT_MESSAGE_CONTENT,_.TEXT_MESSAGE_END,_.RAW].includes(m))return j(()=>new W(`Cannot send event type '${m}' after 'TEXT_MESSAGE_START': Send 'TEXT_MESSAGE_END' first.`));if(n!==void 0&&![_.TOOL_CALL_ARGS,_.TOOL_CALL_END,_.RAW].includes(m))return m===_.TOOL_CALL_START?j(()=>new W("Cannot send 'TOOL_CALL_START' event: A tool call is already in progress. Complete it with 'TOOL_CALL_END' first.")):j(()=>new W(`Cannot send event type '${m}' after 'TOOL_CALL_START': Send 'TOOL_CALL_END' first.`));if(o){if(m===_.RUN_STARTED)return j(()=>new W("Cannot send multiple 'RUN_STARTED' events: A 'RUN_STARTED' event was already sent. Each run must have exactly one 'RUN_STARTED' event at the beginning."))}else if(o=!0,m!==_.RUN_STARTED&&m!==_.RUN_ERROR)return j(()=>new W("First event must be 'RUN_STARTED'"));switch(m){case _.TEXT_MESSAGE_START:return r!==void 0?j(()=>new W("Cannot send 'TEXT_MESSAGE_START' event: A text message is already in progress. Complete it with 'TEXT_MESSAGE_END' first.")):(r=u.messageId,X(u));case _.TEXT_MESSAGE_CONTENT:return r===void 0?j(()=>new W("Cannot send 'TEXT_MESSAGE_CONTENT' event: No active text message found. Start a text message with 'TEXT_MESSAGE_START' first.")):u.messageId!==r?j(()=>new W(`Cannot send 'TEXT_MESSAGE_CONTENT' event: Message ID mismatch. The ID '${u.messageId}' doesn't match the active message ID '${r}'.`)):X(u);case _.TEXT_MESSAGE_END:return r===void 0?j(()=>new W("Cannot send 'TEXT_MESSAGE_END' event: No active text message found. A 'TEXT_MESSAGE_START' event must be sent first.")):u.messageId!==r?j(()=>new W(`Cannot send 'TEXT_MESSAGE_END' event: Message ID mismatch. The ID '${u.messageId}' doesn't match the active message ID '${r}'.`)):(r=void 0,X(u));case _.TOOL_CALL_START:return n!==void 0?j(()=>new W("Cannot send 'TOOL_CALL_START' event: A tool call is already in progress. Complete it with 'TOOL_CALL_END' first.")):(n=u.toolCallId,X(u));case _.TOOL_CALL_ARGS:return n===void 0?j(()=>new W("Cannot send 'TOOL_CALL_ARGS' event: No active tool call found. Start a tool call with 'TOOL_CALL_START' first.")):u.toolCallId!==n?j(()=>new W(`Cannot send 'TOOL_CALL_ARGS' event: Tool call ID mismatch. The ID '${u.toolCallId}' doesn't match the active tool call ID '${n}'.`)):X(u);case _.TOOL_CALL_END:return n===void 0?j(()=>new W("Cannot send 'TOOL_CALL_END' event: No active tool call found. A 'TOOL_CALL_START' event must be sent first.")):u.toolCallId!==n?j(()=>new W(`Cannot send 'TOOL_CALL_END' event: Tool call ID mismatch. The ID '${u.toolCallId}' doesn't match the active tool call ID '${n}'.`)):(n=void 0,X(u));case _.STEP_STARTED:{let g=u.stepName;return a.has(g)?j(()=>new W(`Step "${g}" is already active for 'STEP_STARTED'`)):(a.set(g,!0),X(u))}case _.STEP_FINISHED:{let g=u.stepName;return a.has(g)?(a.delete(g),X(u)):j(()=>new W(`Cannot send 'STEP_FINISHED' for step "${g}" that was not started`))}case _.RUN_STARTED:return X(u);case _.RUN_FINISHED:{if(a.size>0){let g=Array.from(a.keys()).join(", ");return j(()=>new W(`Cannot send 'RUN_FINISHED' while steps are still active: ${g}`))}return s=!0,X(u)}case _.RUN_ERROR:return i=!0,X(u);case _.CUSTOM:return X(u);case _.THINKING_TEXT_MESSAGE_START:return l?c?j(()=>new W("Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking message is already in progress. Complete it with 'THINKING_TEXT_MESSAGE_END' first.")):(c=!0,X(u)):j(()=>new W("Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking step is not in progress. Create one with 'THINKING_START' first."));case _.THINKING_TEXT_MESSAGE_CONTENT:return c?X(u):j(()=>new W("Cannot send 'THINKING_TEXT_MESSAGE_CONTENT' event: No active thinking message found. Start a message with 'THINKING_TEXT_MESSAGE_START' first."));case _.THINKING_TEXT_MESSAGE_END:return c?(c=!1,X(u)):j(()=>new W("Cannot send 'THINKING_TEXT_MESSAGE_END' event: No active thinking message found. A 'THINKING_TEXT_MESSAGE_START' event must be sent first."));case _.THINKING_START:return l?j(()=>new W("Cannot send 'THINKING_START' event: A thinking step is already in progress. End it with 'THINKING_END' first.")):(l=!0,X(u));case _.THINKING_END:return l?(l=!1,X(u)):j(()=>new W("Cannot send 'THINKING_END' event: No active thinking step found. A 'THINKING_START' event must be sent first."));default:return X(u)}}))},kp=(t,e)=>Bi(()=>Vt(fetch(t,e))).pipe(Hi(r=>{var n;let s={type:"headers",status:r.status,headers:r.headers},i=(n=r.body)==null?void 0:n.getReader();return i?new Z(o=>(o.next(s),(async()=>{try{for(;;){let{done:a,value:l}=await i.read();if(a)break;let c={type:"data",data:l};o.next(c)}o.complete()}catch(a){o.error(a)}})(),()=>{i.cancel()})):j(()=>new Error("Failed to getReader() from response"))})),Ip=t=>{let e=new We,r=new TextDecoder("utf-8",{fatal:!1}),n="";t.subscribe({next:i=>{if(i.type!=="headers"&&i.type==="data"&&i.data){let o=r.decode(i.data,{stream:!0});n+=o;let a=n.split(/\n\n/);n=a.pop()||"";for(let l of a)s(l)}},error:i=>e.error(i),complete:()=>{n&&(n+=r.decode(),s(n)),e.complete()}});function s(i){let o=i.split(`
`),a=[];for(let l of o)l.startsWith("data: ")&&a.push(l.slice(6));if(a.length>0)try{let l=a.join(`
`),c=JSON.parse(l);e.next(c)}catch(l){e.error(l)}}return e.asObservable()},Cp=t=>{let e=new We,r=new Uint8Array(0);t.subscribe({next:s=>{if(s.type!=="headers"&&s.type==="data"&&s.data){let i=new Uint8Array(r.length+s.data.length);i.set(r,0),i.set(s.data,r.length),r=i,n()}},error:s=>e.error(s),complete:()=>{if(r.length>0)try{n()}catch{console.warn("Incomplete or invalid protocol buffer data at stream end")}e.complete()}});function n(){for(;r.length>=4;){let s=4+new DataView(r.buffer,r.byteOffset,4).getUint32(0,!1);if(r.length<s)break;try{let i=r.slice(4,s),o=nc(i);e.next(o),r=r.slice(s)}catch(i){let o=i instanceof Error?i.message:String(i);e.error(new Error(`Failed to decode protocol buffer message: ${o}`));return}}}return e.asObservable()},Np=t=>{let e=new We,r=new Fi,n=!1;return t.subscribe({next:s=>{r.next(s),s.type==="headers"&&!n?(n=!0,s.headers.get("content-type")===sc?Cp(r).subscribe({next:i=>e.next(i),error:i=>e.error(i),complete:()=>e.complete()}):Ip(r).subscribe({next:i=>{try{let o=Pn.parse(i);e.next(o)}catch(o){e.error(o)}},error:i=>e.error(i),complete:()=>e.complete()})):n||e.error(new Error("No headers event received before data events"))},error:s=>{r.error(s),e.error(s)},complete:()=>{r.complete()}}),e.asObservable()},K=p.enum(["TextMessageStart","TextMessageContent","TextMessageEnd","ActionExecutionStart","ActionExecutionArgs","ActionExecutionEnd","ActionExecutionResult","AgentStateMessage","MetaEvent","RunStarted","RunFinished","RunError","NodeStarted","NodeFinished"]),Op=p.enum(["LangGraphInterruptEvent","PredictState","Exit"]),Rp=p.object({type:p.literal(K.enum.TextMessageStart),messageId:p.string(),parentMessageId:p.string().optional()}),Mp=p.object({type:p.literal(K.enum.TextMessageContent),messageId:p.string(),content:p.string()}),Lp=p.object({type:p.literal(K.enum.TextMessageEnd),messageId:p.string()}),Pp=p.object({type:p.literal(K.enum.ActionExecutionStart),actionExecutionId:p.string(),actionName:p.string(),parentMessageId:p.string().optional()}),Dp=p.object({type:p.literal(K.enum.ActionExecutionArgs),actionExecutionId:p.string(),args:p.string()}),$p=p.object({type:p.literal(K.enum.ActionExecutionEnd),actionExecutionId:p.string()}),Up=p.object({type:p.literal(K.enum.ActionExecutionResult),actionName:p.string(),actionExecutionId:p.string(),result:p.string()}),Fp=p.object({type:p.literal(K.enum.AgentStateMessage),threadId:p.string(),agentName:p.string(),nodeName:p.string(),runId:p.string(),active:p.boolean(),role:p.string(),state:p.string(),running:p.boolean()}),Hp=p.object({type:p.literal(K.enum.MetaEvent),name:Op,value:p.any()}),kx=p.discriminatedUnion("type",[Rp,Mp,Lp,Pp,Dp,$p,Up,Fp,Hp]),Ix=p.object({id:p.string(),role:p.string(),content:p.string(),parentMessageId:p.string().optional()}),Cx=p.object({id:p.string(),name:p.string(),arguments:p.any(),parentMessageId:p.string().optional()}),Nx=p.object({id:p.string(),result:p.any(),actionExecutionId:p.string(),actionName:p.string()}),Gp=(t,e,r)=>n=>{let s={},i=!0,o=!0,a="",l=null,c=null,u=[],m={},g=h=>{typeof h=="object"&&h!==null&&("messages"in h&&delete h.messages,s=h)};return n.pipe(ke(h=>{switch(h.type){case _.TEXT_MESSAGE_START:{let f=h;return[{type:K.enum.TextMessageStart,messageId:f.messageId}]}case _.TEXT_MESSAGE_CONTENT:{let f=h;return[{type:K.enum.TextMessageContent,messageId:f.messageId,content:f.delta}]}case _.TEXT_MESSAGE_END:{let f=h;return[{type:K.enum.TextMessageEnd,messageId:f.messageId}]}case _.TOOL_CALL_START:{let f=h;return u.push({id:f.toolCallId,type:"function",function:{name:f.toolCallName,arguments:""}}),o=!0,m[f.toolCallId]=f.toolCallName,[{type:K.enum.ActionExecutionStart,actionExecutionId:f.toolCallId,actionName:f.toolCallName,parentMessageId:f.parentMessageId}]}case _.TOOL_CALL_ARGS:{let f=h,v=u[u.length-1];v.function.arguments+=f.delta;let T=!1;if(c){let b=c.find(R=>R.tool==v.function.name);if(b)try{let R=JSON.parse(rn(v.function.arguments));b.tool_argument&&b.tool_argument in R?(g(co(Fe({},s),{[b.state_key]:R[b.tool_argument]})),T=!0):b.tool_argument||(g(co(Fe({},s),{[b.state_key]:R})),T=!0)}catch{}}return[{type:K.enum.ActionExecutionArgs,actionExecutionId:f.toolCallId,args:f.delta},...T?[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(s),active:o}]:[]]}case _.TOOL_CALL_END:{let f=h;return[{type:K.enum.ActionExecutionEnd,actionExecutionId:f.toolCallId}]}case _.TOOL_CALL_RESULT:{let f=h;return[{type:K.enum.ActionExecutionResult,actionExecutionId:f.toolCallId,result:f.content,actionName:m[f.toolCallId]||"unknown"}]}case _.RAW:return[];case _.CUSTOM:{let f=h;switch(f.name){case"Exit":i=!1;break;case"PredictState":c=f.value;break}return[{type:K.enum.MetaEvent,name:f.name,value:f.value}]}case _.STATE_SNAPSHOT:return g(h.snapshot),[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(s),active:o}];case _.STATE_DELTA:{let f=ht(s,h.delta,!0,!1);return f?(g(f.newDocument),[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(s),active:o}]):[]}case _.MESSAGES_SNAPSHOT:return l=h.messages,[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(Fe(Fe({},s),l?{messages:l}:{})),active:!0}];case _.RUN_STARTED:return[];case _.RUN_FINISHED:return l&&(s.messages=l),[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(Fe(Fe({},s),l?{messages:zp(l)}:{})),active:!1}];case _.RUN_ERROR:return console.error("Run error",h),[];case _.STEP_STARTED:return a=h.stepName,u=[],c=null,[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(s),active:!0}];case _.STEP_FINISHED:return u=[],c=null,[{type:K.enum.AgentStateMessage,threadId:t,agentName:r,nodeName:a,runId:e,running:i,role:"assistant",state:JSON.stringify(s),active:!1}];default:return[]}}))};function zp(t){var e;let r=[];for(let n of t)if(n.role==="assistant"||n.role==="user"||n.role==="system"){if(n.content){let s={id:n.id,role:n.role,content:n.content};r.push(s)}if(n.role==="assistant"&&n.toolCalls&&n.toolCalls.length>0)for(let s of n.toolCalls){let i={id:s.id,name:s.function.name,arguments:JSON.parse(s.function.arguments),parentMessageId:n.id};r.push(i)}}else if(n.role==="tool"){let s="unknown";for(let o of t)if(o.role==="assistant"&&(e=o.toolCalls)!=null&&e.length){for(let a of o.toolCalls)if(a.id===n.toolCallId){s=a.function.name;break}}let i={id:n.id,result:n.content,actionExecutionId:n.toolCallId,actionName:s};r.push(i)}return r}var uc=t=>e=>{let r,n,s,i=()=>{if(!r||s!=="text")throw new Error("No text message to close");let l={type:_.TEXT_MESSAGE_END,messageId:r.messageId};return s=void 0,r=void 0,t&&console.debug("[TRANSFORM]: TEXT_MESSAGE_END",JSON.stringify(l)),l},o=()=>{if(!n||s!=="tool")throw new Error("No tool call to close");let l={type:_.TOOL_CALL_END,toolCallId:n.toolCallId};return s=void 0,n=void 0,t&&console.debug("[TRANSFORM]: TOOL_CALL_END",JSON.stringify(l)),l},a=()=>s==="text"?[i()]:s==="tool"?[o()]:[];return e.pipe(ke(l=>{switch(l.type){case _.TEXT_MESSAGE_START:case _.TEXT_MESSAGE_CONTENT:case _.TEXT_MESSAGE_END:case _.TOOL_CALL_START:case _.TOOL_CALL_ARGS:case _.TOOL_CALL_END:case _.TOOL_CALL_RESULT:case _.STATE_SNAPSHOT:case _.STATE_DELTA:case _.MESSAGES_SNAPSHOT:case _.CUSTOM:case _.RUN_STARTED:case _.RUN_FINISHED:case _.RUN_ERROR:case _.STEP_STARTED:case _.STEP_FINISHED:case _.THINKING_START:case _.THINKING_END:case _.THINKING_TEXT_MESSAGE_START:case _.THINKING_TEXT_MESSAGE_CONTENT:case _.THINKING_TEXT_MESSAGE_END:return[...a(),l];case _.RAW:return[l];case _.TEXT_MESSAGE_CHUNK:let u=l,m=[];if((s!=="text"||u.messageId!==void 0&&u.messageId!==r?.messageId)&&m.push(...a()),s!=="text"){if(u.messageId===void 0)throw new Error("First TEXT_MESSAGE_CHUNK must have a messageId");r={messageId:u.messageId},s="text";let f={type:_.TEXT_MESSAGE_START,messageId:u.messageId,role:"assistant"};m.push(f),t&&console.debug("[TRANSFORM]: TEXT_MESSAGE_START",JSON.stringify(f))}if(u.delta!==void 0){let f={type:_.TEXT_MESSAGE_CONTENT,messageId:r.messageId,delta:u.delta};m.push(f),t&&console.debug("[TRANSFORM]: TEXT_MESSAGE_CONTENT",JSON.stringify(f))}return m;case _.TOOL_CALL_CHUNK:let g=l,h=[];if((s!=="tool"||g.toolCallId!==void 0&&g.toolCallId!==n?.toolCallId)&&h.push(...a()),s!=="tool"){if(g.toolCallId===void 0)throw new Error("First TOOL_CALL_CHUNK must have a toolCallId");if(g.toolCallName===void 0)throw new Error("First TOOL_CALL_CHUNK must have a toolCallName");n={toolCallId:g.toolCallId,toolCallName:g.toolCallName,parentMessageId:g.parentMessageId},s="tool";let f={type:_.TOOL_CALL_START,toolCallId:g.toolCallId,toolCallName:g.toolCallName,parentMessageId:g.parentMessageId};h.push(f),t&&console.debug("[TRANSFORM]: TOOL_CALL_START",JSON.stringify(f))}if(g.delta!==void 0){let f={type:_.TOOL_CALL_ARGS,toolCallId:n.toolCallId,delta:g.delta};h.push(f),t&&console.debug("[TRANSFORM]: TOOL_CALL_ARGS",JSON.stringify(f))}return h}let c=l.type}),br(()=>a()))},Bp=class{constructor({agentId:t,description:e,threadId:r,initialMessages:n,initialState:s,debug:i}={}){this.debug=!1,this.subscribers=[],this.agentId=t,this.description=e??"",this.threadId=r??Tr(),this.messages=de(n??[]),this.state=de(s??{}),this.debug=i??!1}subscribe(t){return this.subscribers.push(t),{unsubscribe:()=>{this.subscribers=this.subscribers.filter(e=>e!==t)}}}async runAgent(t,e){var r;this.agentId=(r=this.agentId)!=null?r:Tr();let n=this.prepareRunAgentInput(t),s,i=new Set(this.messages.map(l=>l.id)),o=[{onRunFinishedEvent:l=>{s=l.result}},...this.subscribers,e??{}];await this.onInitialize(n,o);let a=Ri(()=>this.run(n),uc(this.debug),cc(this.debug),l=>this.apply(n,l,o),l=>this.processApplyEvents(n,l,o),Yn(l=>this.onError(n,l,o)),br(()=>{this.onFinalize(n,o)}));return zi(a(X(null))).then(()=>{let l=de(this.messages).filter(c=>!i.has(c.id));return{result:s,newMessages:l}})}abortRun(){}apply(t,e,r){return Ap(t,e,this,r)}processApplyEvents(t,e,r){return e.pipe(Gi(n=>{n.messages&&(this.messages=n.messages,r.forEach(s=>{var i;(i=s.onMessagesChanged)==null||i.call(s,{messages:this.messages,state:this.state,agent:this,input:t})})),n.state&&(this.state=n.state,r.forEach(s=>{var i;(i=s.onStateChanged)==null||i.call(s,{state:this.state,messages:this.messages,agent:this,input:t})}))}))}prepareRunAgentInput(t){var e,r,n;return{threadId:this.threadId,runId:t?.runId||Tr(),tools:de((e=t?.tools)!=null?e:[]),context:de((r=t?.context)!=null?r:[]),forwardedProps:de((n=t?.forwardedProps)!=null?n:{}),state:de(this.state),messages:de(this.messages)}}async onInitialize(t,e){let r=await ee(e,this.messages,this.state,(n,s,i)=>{var o;return(o=n.onRunInitialized)==null?void 0:o.call(n,{messages:s,state:i,agent:this,input:t})});(r.messages!==void 0||r.state!==void 0)&&(r.messages&&(this.messages=r.messages,t.messages=r.messages,e.forEach(n=>{var s;(s=n.onMessagesChanged)==null||s.call(n,{messages:this.messages,state:this.state,agent:this,input:t})})),r.state&&(this.state=r.state,t.state=r.state,e.forEach(n=>{var s;(s=n.onStateChanged)==null||s.call(n,{state:this.state,messages:this.messages,agent:this,input:t})})))}onError(t,e,r){return Vt(ee(r,this.messages,this.state,(n,s,i)=>{var o;return(o=n.onRunFailed)==null?void 0:o.call(n,{error:e,messages:s,state:i,agent:this,input:t})})).pipe(xr(n=>{let s=n;if((s.messages!==void 0||s.state!==void 0)&&(s.messages!==void 0&&(this.messages=s.messages,r.forEach(i=>{var o;(o=i.onMessagesChanged)==null||o.call(i,{messages:this.messages,state:this.state,agent:this,input:t})})),s.state!==void 0&&(this.state=s.state,r.forEach(i=>{var o;(o=i.onStateChanged)==null||o.call(i,{state:this.state,messages:this.messages,agent:this,input:t})}))),s.stopPropagation!==!0)throw console.error("Agent execution failed:",e),e;return{}}))}async onFinalize(t,e){let r=await ee(e,this.messages,this.state,(n,s,i)=>{var o;return(o=n.onRunFinalized)==null?void 0:o.call(n,{messages:s,state:i,agent:this,input:t})});(r.messages!==void 0||r.state!==void 0)&&(r.messages!==void 0&&(this.messages=r.messages,e.forEach(n=>{var s;(s=n.onMessagesChanged)==null||s.call(n,{messages:this.messages,state:this.state,agent:this,input:t})})),r.state!==void 0&&(this.state=r.state,e.forEach(n=>{var s;(s=n.onStateChanged)==null||s.call(n,{state:this.state,messages:this.messages,agent:this,input:t})})))}clone(){let t=Object.create(Object.getPrototypeOf(this));for(let e of Object.getOwnPropertyNames(this)){let r=this[e];typeof r!="function"&&(t[e]=de(r))}return t}addMessage(t){this.messages.push(t),(async()=>{var e,r,n;for(let s of this.subscribers)await((e=s.onNewMessage)==null?void 0:e.call(s,{message:t,messages:this.messages,state:this.state,agent:this}));if(t.role==="assistant"&&t.toolCalls)for(let s of t.toolCalls)for(let i of this.subscribers)await((r=i.onNewToolCall)==null?void 0:r.call(i,{toolCall:s,messages:this.messages,state:this.state,agent:this}));for(let s of this.subscribers)await((n=s.onMessagesChanged)==null?void 0:n.call(s,{messages:this.messages,state:this.state,agent:this}))})()}addMessages(t){this.messages.push(...t),(async()=>{var e,r,n;for(let s of t){for(let i of this.subscribers)await((e=i.onNewMessage)==null?void 0:e.call(i,{message:s,messages:this.messages,state:this.state,agent:this}));if(s.role==="assistant"&&s.toolCalls)for(let i of s.toolCalls)for(let o of this.subscribers)await((r=o.onNewToolCall)==null?void 0:r.call(o,{toolCall:i,messages:this.messages,state:this.state,agent:this}))}for(let s of this.subscribers)await((n=s.onMessagesChanged)==null?void 0:n.call(s,{messages:this.messages,state:this.state,agent:this}))})()}setMessages(t){this.messages=de(t),(async()=>{var e;for(let r of this.subscribers)await((e=r.onMessagesChanged)==null?void 0:e.call(r,{messages:this.messages,state:this.state,agent:this}))})()}setState(t){this.state=de(t),(async()=>{var e;for(let r of this.subscribers)await((e=r.onStateChanged)==null?void 0:e.call(r,{messages:this.messages,state:this.state,agent:this}))})()}legacy_to_be_removed_runAgentBridged(t){var e;this.agentId=(e=this.agentId)!=null?e:Tr();let r=this.prepareRunAgentInput(t);return this.run(r).pipe(uc(this.debug),cc(this.debug),Gp(this.threadId,r.runId,this.agentId),n=>n.pipe(xr(s=>(this.debug&&console.debug("[LEGACY]:",JSON.stringify(s)),s))))}},dc=class extends Bp{constructor(t){var e;super(t),this.abortController=new AbortController,this.url=t.url,this.headers=de((e=t.headers)!=null?e:{})}requestInit(t){return{method:"POST",headers:co(Fe({},this.headers),{"Content-Type":"application/json",Accept:"text/event-stream"}),body:JSON.stringify(t),signal:this.abortController.signal}}runAgent(t,e){var r;return this.abortController=(r=t?.abortController)!=null?r:new AbortController,super.runAgent(t,e)}abortRun(){this.abortController.abort(),super.abortRun()}run(t){let e=kp(this.url,this.requestInit(t));return Np(e)}};var re=class extends lt{constructor(){super(...arguments);M(this,"placeholderText","");M(this,"iconSvg","");M(this,"iconUrl","");M(this,"headerHeight",0);M(this,"conversationTitle","New Conversation");M(this,"messages",[]);M(this,"open",!1);M(this,"panelMode",!1);M(this,"inputFocused",!1);M(this,"loadedIconSvg","");M(this,"isTyping",!1);M(this,"isSubmittable",!0);M(this,"currentMode","min");M(this,"lastExpandedMode","dialog");M(this,"httpAgent",null)}setOpen(r){this.open=r,this.requestUpdate(),!r&&this.panelMode&&(this.panelMode=!1,In()),r&&(this.inputFocused=!1),this.updateComplete.then(()=>{let n=this.shadowRoot?.querySelector(`.${B.CONTAINER}`);n&&(n.style.bottom=r?"0":"")})}configureHttpAgent(r){return this.httpAgent=new dc(r),this.httpAgent}getHttpAgent(){return this.httpAgent}setTyping(r){this.isTyping=r,this.requestUpdate()}setSubmittable(r){this.isSubmittable=r,this.requestUpdate()}replaceLastMessage(r){if(this.messages.length===0){this.messages=[{type:"agent",text:r}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom());return}let n=this.messages[this.messages.length-1];n.type==="agent"?(this.messages=[...this.messages.slice(0,-1),{...n,text:r}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom())):(this.messages=[...this.messages,{type:"agent",text:r}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom()))}appendToLastMessage(r){if(this.messages.length===0){this.messages=[{type:"agent",text:r}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom());return}let n=this.messages[this.messages.length-1];if(n.type==="agent"){let s=n.text+r;this.messages=[...this.messages.slice(0,-1),{...n,text:s}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom())}else this.messages=[...this.messages,{type:"agent",text:r}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom())}setInputValue(r){this.updateComplete.then(()=>{let n=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);n&&(n.value=r)})}_scrollToBottom(){let r=this.shadowRoot?.querySelector(`.${B.MESSAGE_CONTAINER}`);r&&(r.scrollTop=r.scrollHeight)}_parseMessageContent(r,n){return n?An(r):Oa(r)}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this._handleGlobalKeydown.bind(this)),this._loadIcon(),document.documentElement.style.setProperty(Ei.HEADER_HEIGHT,`${this.headerHeight}px`)}async _loadIcon(){if(this.iconSvg){this.loadedIconSvg=this.iconSvg;return}this.iconUrl&&(this.loadedIconSvg=await Ra(this.iconUrl),this.requestUpdate())}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this._handleGlobalKeydown.bind(this)),this.panelMode&&In(),document.documentElement.style.removeProperty(Ei.HEADER_HEIGHT)}_handleGlobalKeydown(r){(r.ctrlKey||r.metaKey)&&r.key===Da.TOGGLE&&(r.preventDefault(),this.currentMode==="min"?this._expandToMaxMode():(this.currentMode="min",this.setOpen(!1)))}_expandToMaxMode(){this.currentMode="max",this.setOpen(!0),this.panelMode=this.lastExpandedMode==="panel",this.requestUpdate(),this.panelMode&&kn(this.headerHeight),this.updateComplete.then(()=>{let r=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);r&&r.focus()})}_toggleExpanded(){this.open?(this.lastExpandedMode=this.panelMode?"panel":"dialog",this.setOpen(!1)):this._openExpanded()}_openExpanded(){this.setOpen(!0),this.panelMode=this.lastExpandedMode==="panel",this.requestUpdate(),this.panelMode&&(document.body.style.marginRight=La,document.body.style.transition=Pa),this.updateComplete.then(()=>{let r=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);r&&(r.focus(),this.inputFocused=!0,this.requestUpdate())})}_handleSendMessage(){if(!this.isSubmittable)return;let r=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);if(r&&r.value.trim()){let n=r.value,s=An(n);this.messages=[...this.messages,{type:"user",text:s}],this.requestUpdate(),this.updateComplete.then(()=>this._scrollToBottom()),this.dispatchEvent(new CustomEvent("message",{detail:{query:s}})),r.value=""}this.open||this._expandOnSend()}_expandOnSend(){this.setOpen(!0),this.panelMode=this.lastExpandedMode==="panel",this.requestUpdate(),this.panelMode&&kn(this.headerHeight),this.inputFocused=!1,this.updateComplete.then(()=>{let r=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);r&&r.focus()})}_handleKeydown(r){r.key==="Enter"&&this.isSubmittable&&this._handleSendMessage()}_handleInputFocus(){this.inputFocused=!0,this.requestUpdate()}_handleInputBlur(){this.inputFocused=!1,this.requestUpdate()}_handleBackdropClick(r){this.open&&r.target===this.shadowRoot?.querySelector(`.${B.BACKDROP}`)&&this.setOpen(!1)}_handleCopyMessage(r,n){n.stopPropagation(),Ma(r).catch(s=>{console.error("Failed to copy message:",s)})}_handlePanelToggle(){this.panelMode=!this.panelMode,this.lastExpandedMode=this.panelMode?"panel":"dialog",this.requestUpdate(),this.panelMode?kn(this.headerHeight):In(),this.updateComplete.then(()=>{let r=this.shadowRoot?.querySelector(`.${B.INPUT_FIELD}`);r&&(r.focus(),this.inputFocused=!0,this.requestUpdate())})}render(){return Ce`
      <div class="${B.BACKDROP} ${this.open?B.VISIBLE:""} ${this.panelMode?B.PANEL_MODE:""}" @click=${this._handleBackdropClick}></div>
      <div class="${B.CONTAINER} ${this.open?B.EXPANDED:""} ${this.panelMode?B.PANEL_MODE:""} ${this.inputFocused?B.INPUT_FOCUSED:""}">
        ${this.open?Ce`
          <div class="${B.HEADER_BAR}">
            <h2 class="${B.HEADER_TITLE}">${this.conversationTitle}</h2>
          </div>
          <div class="${B.MESSAGE_CONTAINER}">
            ${this.messages.map(r=>Ce`
              <div class="${B.MESSAGE} ${r.type}-message">
                <div class="message-text" .innerHTML=${this._parseMessageContent(r.text,r.type==="user")}></div>
                ${r.type==="agent"?Ce`
                  <button class="${B.COPY_BUTTON}" @click=${n=>this._handleCopyMessage(r.text,n)} title="Copy to clipboard">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-icon lucide-copy"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                  </button>
                `:""}
              </div>
            `)}
            ${this.isTyping?Ce`
              <div class="${B.MESSAGE} agent-message">
                <span class="${B.TYPING_INDICATOR}">
                  <span></span><span></span><span></span>
                </span>
              </div>
            `:""}
          </div>
        `:""}
        <div class="${B.INPUT_CONTAINER}">
          <div class="${B.INPUT_WRAPPER}">
            ${this.loadedIconSvg?Ce`
              <div class="input-prefix">
                <div .innerHTML=${this.loadedIconSvg}></div>
              </div>
            `:""}
            <input 
              class="${B.INPUT_FIELD}" 
              type="text" 
              placeholder=${this.placeholderText}
              @keydown=${this._handleKeydown}
              @focus=${this._handleInputFocus}
              @blur=${this._handleInputBlur}
            />
            <button class="${B.SEND_BUTTON}" ?disabled=${!this.isSubmittable} @click=${this._handleSendMessage}>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-horizontal-icon lucide-send-horizontal"><path d="M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"/><path d="M6 12h16"/></svg>
            </button>
          </div>
        </div>
        <button class="${B.TOGGLE_BUTTON}" @click=${this._toggleExpanded} title=${this.open?"Collapse":"Expand"}>
          ${this.open?Ce`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
          `:Ce`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2-icon lucide-maximize-2"><path d="M15 3h6v6"/><path d="m21 3-7 7"/><path d="m3 21 7-7"/><path d="M9 21H3v-6"/></svg>
          `}
        </button>
        ${this.open?Ce`
          <button class="${B.PANEL_TOGGLE_BUTTON}" @click=${this._handlePanelToggle} title=${this.panelMode?"Switch to dialog mode":"Switch to panel mode"}>
            ${this.panelMode?Ce`
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-chevron-left-icon lucide-square-chevron-left"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m14 16-4-4 4-4"/></svg>
            `:Ce`
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-right-icon lucide-panel-right"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18"/></svg>
            `}
          </button>
        `:""}
      </div>
    `}};M(re,"styles",Xs`
    :host { 
      display: block;
      z-index: 1000; 
      font-family: sans-serif;
      box-sizing: border-box;
      font-size: 14px;
      --agent-ui-brand-color: #702c62;
      --agent-ui-brand-color-light: rgba(112, 44, 98, 0.1);
    }
    
    .backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s ease, visibility 0.4s ease;
      z-index: 999;
      pointer-events: none;
    }    
    
    .backdrop.visible {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }
    
    .backdrop.panel-mode {
      display: none;
    }
    
    .container {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #e0e0e0;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      transition: all 0.4s ease;
      display: flex;
      flex-direction: column;
    }
    
    .container.expanded {
      width: 80vw;
      height: calc(80vh - var(--agent-ui-header-height, 0px));
      left: 50%;
      top: calc(var(--agent-ui-header-height, 0px) + (20vh) / 2);
      transform: translate(-50%, 0);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
    }
    
    .container.expanded .message-container {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 0;
      min-height: 0;
    }
    
    .header-bar {
      padding: 12px 16px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .header-title {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin: 0;
    }
    
    .container.expanded .input-container {
      flex-shrink: 0;
      margin-top: 0;
    }
    
    .container.panel-mode {
      position: fixed;
      top: var(--agent-ui-header-height, 0px);
      right: 0;
      bottom: 0 !important;
      left: auto;
      transform: none;
      width: 400px;
      height: calc(100vh - var(--agent-ui-header-height, 0px));
      border-radius: 0;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
      z-index: 1001;
    }
    
    :host(.panel-mode) {
      margin-right: 400px;
    }
    
    @media (max-width: 768px) {
      .container.expanded {
        width: 80vw;
        height: calc(80vh - var(--agent-ui-header-height, 0px));
        bottom: 0 !important;
        left: 50%;
        transform: translateX(-50%);
        background: white;
      }
      
      .container.panel-mode {
        width: 100vw;
        left: 0;
        right: 0;
        bottom: 0 !important;
      }
      
      :host(.panel-mode) {
        margin-right: 0;
      }
    }
    
    @media (max-width: 480px) {
      .container.expanded {
        width: 80vw;
        height: calc(80vh - var(--agent-ui-header-height, 0px));
        bottom: 0 !important;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 0;
        background: white;
      }
      
      .container.panel-mode {
        width: 100vw;
        left: 0;
        right: 0;
        bottom: 0 !important;
      }
    }
    
    .input-container {
      padding: 8px;
      flex-shrink: 0;
    }
    
    .input-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #f8f9fa;
      border-radius: 12px;
      padding: 6px 12px;
      border: 1px solid #e0e0e0;
      max-width: 80vw;
      margin: 0 auto;
      transition: all 0.2s ease;
    }
    
    .input-prefix {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .input-field {
      flex: 1;
      border: none;
      background: transparent;
      font-size: 14px;
      outline: none;
      color: #333;
    }
    
    .input-field::placeholder {
      color: #666;
    }
    
    .send-button {
      background: none;
      border: none;
      color: var(--agent-ui-brand-color);
      cursor: pointer;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .send-button:hover {
      background: var(--agent-ui-brand-color-light);
      color: var(--agent-ui-brand-color);
      transform: scale(1.1);
    }
    
    .send-button:active {
      transform: scale(0.95);
    }
    
    .send-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .send-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f0f0f0;
      color: #999;
    }
    
    .send-button:disabled:hover {
      background: #f0f0f0;
      color: #999;
      transform: none;
      box-shadow: none;
    }
    
    .message-container {
      overflow-y: auto;
      flex: 1;
      min-height: 0;
    }
    
    .message {
      margin: 8px;
      padding: 8px 12px;
      border-radius: 8px;
    }
    
    .user-message {
      background: var(--agent-ui-brand-color-light);
      display: block;
      width: fit-content;
    }
    
    .agent-message {
      background: white;
      position: relative;
    }
    
    .agent-message .copy-button {
      position: absolute;
      top: 8px;
      right: 8px;
      background: none;
      border: none;
      color: var(--agent-ui-brand-color);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .agent-message:hover .copy-button {
      display: flex;
    }
    
    .copy-button:hover {
      background: var(--agent-ui-brand-color-light);
      color: var(--agent-ui-brand-color);
      transform: scale(1.1);
    }
    
    .copy-button:active {
      transform: scale(0.95);
    }
    
    .typing-indicator {
      display: inline-block;
      animation: typing 1.4s infinite;
    }    
    
    .typing-indicator span {
      display: inline-block;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--agent-ui-brand-color);
      margin: 0 2px;
      animation: typing-dot 1.4s infinite;
    }    
    
    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }    
    
    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }    
    
    @keyframes typing-dot {
      0%, 60%, 100% {
        opacity: 0.3;
        transform: scale(0.8);
      }
      30% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .toggle-button {
      position: absolute;
      top: 50%;
      right: 8px;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--agent-ui-brand-color);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.2s ease;
    }
    
    .toggle-button:hover {
      background: var(--agent-ui-brand-color-light);
      color: var(--agent-ui-brand-color);
      transform: translateY(-50%) scale(1.1);
    }
    
    .toggle-button:active {
      transform: translateY(-50%) scale(0.95);
    }
    
    .container.expanded .toggle-button {
      top: 8px;
      transform: none;
    }
    
    .container.expanded .toggle-button:hover {
      transform: scale(1.1);
    }
    
    .container.expanded .toggle-button:active {
      transform: scale(0.95);
    }
    
    .panel-toggle-button {
      position: absolute;
      top: 8px;
      right: 40px;
      background: none;
      border: none;
      color: var(--agent-ui-brand-color);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.2s ease;
    }
    
    .panel-toggle-button:hover {
      background: var(--agent-ui-brand-color-light);
      color: var(--agent-ui-brand-color);
      transform: scale(1.1);
    }
    
    .panel-toggle-button:active {
      transform: scale(0.95);
    }
    
    table {
      border-collapse: collapse;
    }
    
    th, td {
      border: 1px solid #e0e0e0;
      padding: 4px 6px;
      text-align: left;
    }
    
    th {
      background-color: #f8f9fa;
      font-weight: 600;
    }
    
    th {
      text-align: left !important;
    }
    
    ul, ol {
      padding-left: 20px;
    }
    
    .message-text > h1:first-child,
    .message-text > h2:first-child,
    .message-text > h3:first-child,
    .message-text > h4:first-child,
    .message-text > h5:first-child,
    .message-text > h6:first-child,
    .message-text > p:first-child,
    .message-text > ul:first-child,
    .message-text > ol:first-child,
    .message-text > blockquote:first-child,
    .message-text > pre:first-child {
      margin-top: 0;
    }
    
    .message-text > h1:last-child,
    .message-text > h2:last-child,
    .message-text > h3:last-child,
    .message-text > h4:last-child,
    .message-text > h5:last-child,
    .message-text > h6:last-child,
    .message-text > p:last-child,
    .message-text > ul:last-child,
    .message-text > ol:last-child,
    .message-text > blockquote:last-child,
    .message-text > pre:last-child {
      margin-bottom: 0;
    }
  `),me([ct({type:String,attribute:"placeholder-text"})],re.prototype,"placeholderText",2),me([ct({type:String,attribute:"icon-svg"})],re.prototype,"iconSvg",2),me([ct({type:String,attribute:"icon-url"})],re.prototype,"iconUrl",2),me([ct({type:Number,attribute:"header-height"})],re.prototype,"headerHeight",2),me([ct({type:String})],re.prototype,"conversationTitle",2),me([Ge()],re.prototype,"messages",2),me([Ge()],re.prototype,"open",2),me([Ge()],re.prototype,"panelMode",2),me([Ge()],re.prototype,"inputFocused",2),me([Ge()],re.prototype,"loadedIconSvg",2),me([Ge()],re.prototype,"isTyping",2),me([Ge()],re.prototype,"isSubmittable",2),me([Ge()],re.prototype,"currentMode",2),me([Ge()],re.prototype,"lastExpandedMode",2),re=me([ea("agent-ui")],re);})();
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)

fast-json-patch/module/helpers.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

fast-json-patch/module/duplex.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2021 Joachim Wester
   * MIT license
   *)
*/
//# sourceMappingURL=agent-ui.js.map
